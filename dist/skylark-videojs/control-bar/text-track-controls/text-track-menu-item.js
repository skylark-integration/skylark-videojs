/**
 * skylark-videojs - A version of video.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-globals/document","../../menu/menu-item","../../component"],function(e,t,n){"use strict";class a extends t{constructor(t,n){const a=n.track,s=t.textTracks();n.label=a.label||a.language||"Unknown",n.selected="showing"===a.mode,super(t,n),this.track=a,this.kinds=(n.kinds||[n.kind||this.track.kind]).filter(Boolean);const i=(...e)=>{this.handleTracksChange.apply(this,e)},c=(...e)=>{this.handleSelectedLanguageChange.apply(this,e)};if(t.on(["loadstart","texttrackchange"],i),s.addEventListener("change",i),s.addEventListener("selectedlanguagechange",c),this.listenTo("dispose",function(){t.off(["loadstart","texttrackchange"],i),s.removeEventListener("change",i),s.removeEventListener("selectedlanguagechange",c)}),void 0===s.onchange){let t;this.listenTo(["tap","click"],function(){if("object"!=typeof window.Event)try{t=new window.Event("change")}catch(e){}t||(t=e.createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(t)})}this.handleTracksChange()}handleClick(e){const t=this.track,n=this.player_.textTracks();if(super.handleClick(e),n)for(let e=0;e<n.length;e++){const a=n[e];-1!==this.kinds.indexOf(a.kind)&&(a===t?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}}handleTracksChange(e){const t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if("showing"===this.track.mode){const e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}return n.registerComponent("TextTrackMenuItem",a),a});
//# sourceMappingURL=../../sourcemaps/control-bar/text-track-controls/text-track-menu-item.js.map
