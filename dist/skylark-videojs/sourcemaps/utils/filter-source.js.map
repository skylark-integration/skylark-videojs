{"version":3,"sources":["utils/filter-source.js"],"names":["define","obj","mimetypes","filterSource","src","Array","isArray","newsrc","forEach","srcobj","concat","isObject","push","trim","fixSource","type","mimetype","getMimetype"],"mappings":";;;;;;;AAAAA,QACI,QACA,eACD,SAAUC,EAAKC,GACd,aACA,MAAMC,EAAe,SAAUC,GAC3B,GAAIC,MAAMC,QAAQF,GAAM,CACpB,IAAIG,KACJH,EAAII,QAAQ,SAAUC,GAClBA,EAASN,EAAaM,GAClBJ,MAAMC,QAAQG,GACdF,EAASA,EAAOG,OAAOD,GAChBR,EAAIU,SAASF,IACpBF,EAAOK,KAAKH,KAGpBL,EAAMG,OAENH,EADsB,iBAARA,GAAoBA,EAAIS,QAC/BC,GAAYV,IAAAA,KACZH,EAAIU,SAASP,IAA2B,iBAAZA,EAAIA,KAAoBA,EAAIA,KAAOA,EAAIA,IAAIS,QACvEC,EAAUV,OAIrB,OAAOA,GAEX,SAASU,EAAUV,GACf,IAAKA,EAAIW,KAAM,CACX,MAAMC,EAAWd,EAAUe,YAAYb,EAAIA,KACvCY,IACAZ,EAAIW,KAAOC,GAGnB,OAAOZ,EAEX,OAAOD","file":"../../utils/filter-source.js","sourcesContent":["define([\n    './obj',\n    './mimetypes'\n], function (obj, mimetypes) {\n    'use strict';\n    const filterSource = function (src) {\n        if (Array.isArray(src)) {\n            let newsrc = [];\n            src.forEach(function (srcobj) {\n                srcobj = filterSource(srcobj);\n                if (Array.isArray(srcobj)) {\n                    newsrc = newsrc.concat(srcobj);\n                } else if (obj.isObject(srcobj)) {\n                    newsrc.push(srcobj);\n                }\n            });\n            src = newsrc;\n        } else if (typeof src === 'string' && src.trim()) {\n            src = [fixSource({ src })];\n        } else if (obj.isObject(src) && typeof src.src === 'string' && src.src && src.src.trim()) {\n            src = [fixSource(src)];\n        } else {\n            src = [];\n        }\n        return src;\n    };\n    function fixSource(src) {\n        if (!src.type) {\n            const mimetype = mimetypes.getMimetype(src.src);\n            if (mimetype) {\n                src.type = mimetype;\n            }\n        }\n        return src;\n    }\n    return filterSource;\n});"]}