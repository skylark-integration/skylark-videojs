{"version":3,"sources":["tech/tech.js"],"names":["define","window","document","Component","mergeOptions","Fn","log","timeRages","buffer","MediaError","obj","TRACK_TYPES","stringCases","vtt","Tech","[object Object]","options","ready","reportTouchActivity","super","this","hasStarted_","listenTo","ALL","names","forEach","name","props","getterName","privateName","featuresProgressEvents","manualProgressOn","featuresTimeupdateEvents","manualTimeUpdatesOn","track","nativeCaptions","nativeTextTracks","featuresNativeTextTracks","emulateTextTracks","preloadTextTracks","autoRemoteTextTracks_","text","ListClass","initTrackListeners","nativeControlsForTouch","emitTapEvents","constructor","name_","src","isReady_","listenToOnce","setTimeout","triggerSourceset","trigger","type","listenToDurationChange","manualProgress","trackProgress","stopTrackingProgress","unlistenTo","event","progressInterval","setInterval","bind","numBufferedPercent","undefined","bufferedPercent_","duration_","duration","createTimeRange","bufferedPercent","buffered","clearInterval","manualTimeUpdates","trackCurrentTime","stopTrackingCurrentTime","currentTimeInterval","target","manuallyTriggered","clearTracks","NORMAL","manualProgressOff","manualTimeUpdatesOff","dispose","types","concat","list","i","length","removeRemoteTextTrack","removeTrack","err","error_","trackListChanges","tracks","addEventListener","removeEventListener","WebVTT","body","contains","el","options_","isPlain","Object","keys","script","createElement","onload","onerror","parentNode","appendChild","addWebVttScript_","textTracks","remoteTracks","remoteTextTracks","handleAddTrack","e","addTrack","handleRemoveTrack","on","updateDisplay","textTracksChanges","mode","off","kind","label","language","Error","self","tech","TrackClass","createTrackHelper","REMOTE","remoteTextEl","manualCleanup","htmlTrackElement","createRemoteTextTrack","warn","remoteTextTrackEls","addTrackElement_","trackElement","getTrackElementByTrack_","removeTrackElement_","PromiseClass","Promise","reject","srcObj","canPlayType","component","prototype","techs_","isTech","canPlaySource","toTitleCase","toLowerCase","defaultTechOrder_","push","videojs","featuresVolumeControl","featuresMuteControl","featuresFullscreenResize","featuresPlaybackRate","featuresSourceset","withSourceHandlers","_Tech","registerSourceHandler","handler","index","handlers","sourceHandlers","splice","can","selectSourceHandler","source","canHandleSource","sh","fnName","originalFn","sourceHandler_","apply","arguments","setSource","nativeSourceHandler","error","disposeSourceHandler","currentSource_","handleSource","cleanupAutoTextTracks","registerComponent","registerTech"],"mappings":"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","file":"../../tech/tech.js","sourcesContent":["define([\n    'skylark-langx-globals/window',\n    'skylark-langx-globals/document',\n    '../component',\n    '../utils/merge-options',\n    '../utils/fn',\n    '../utils/log',\n    '../utils/time-ranges',\n    '../utils/buffer',\n    '../media-error',\n    '../utils/obj',\n    '../tracks/track-types',\n    '../utils/string-cases',\n    'skylark-videojs-vtt'\n], function (window, document, Component, mergeOptions, Fn, log, timeRages, buffer, MediaError, obj, TRACK_TYPES, stringCases, vtt) {\n    'use strict';\n    function createTrackHelper(self, kind, label, language, options = {}) {\n        const tracks = self.textTracks();\n        options.kind = kind;\n        if (label) {\n            options.label = label;\n        }\n        if (language) {\n            options.language = language;\n        }\n        options.tech = self;\n        const track = new TRACK_TYPES.ALL.text.TrackClass(options);\n        tracks.addTrack(track);\n        return track;\n    }\n    class Tech extends Component {\n        constructor(options = {}, ready = function () {\n        }) {\n            options.reportTouchActivity = false;\n            super(null, options, ready);\n            this.hasStarted_ = false;\n            this.listenTo('playing', function () {\n                this.hasStarted_ = true;\n            });\n            this.listenTo('loadstart', function () {\n                this.hasStarted_ = false;\n            });\n            TRACK_TYPES.ALL.names.forEach(name => {\n                const props = TRACK_TYPES.ALL[name];\n                if (options && options[props.getterName]) {\n                    this[props.privateName] = options[props.getterName];\n                }\n            });\n            if (!this.featuresProgressEvents) {\n                this.manualProgressOn();\n            }\n            if (!this.featuresTimeupdateEvents) {\n                this.manualTimeUpdatesOn();\n            }\n            [\n                'Text',\n                'Audio',\n                'Video'\n            ].forEach(track => {\n                if (options[`native${ track }Tracks`] === false) {\n                    this[`featuresNative${ track }Tracks`] = false;\n                }\n            });\n            if (options.nativeCaptions === false || options.nativeTextTracks === false) {\n                this.featuresNativeTextTracks = false;\n            } else if (options.nativeCaptions === true || options.nativeTextTracks === true) {\n                this.featuresNativeTextTracks = true;\n            }\n            if (!this.featuresNativeTextTracks) {\n                this.emulateTextTracks();\n            }\n            this.preloadTextTracks = options.preloadTextTracks !== false;\n            this.autoRemoteTextTracks_ = new TRACK_TYPES.ALL.text.ListClass();\n            this.initTrackListeners();\n            if (!options.nativeControlsForTouch) {\n                this.emitTapEvents();\n            }\n            if (this.constructor) {\n                this.name_ = this.constructor.name || 'Unknown Tech';\n            }\n        }\n        triggerSourceset(src) {\n            if (!this.isReady_) {\n                this.listenToOnce('ready', () => this.setTimeout(() => this.triggerSourceset(src), 1));\n            }\n            this.trigger({\n                src,\n                type: 'sourceset'\n            });\n        }\n        manualProgressOn() {\n            this.listenTo('durationchange', this.listenToDurationChange);\n            this.manualProgress = true;\n            this.listenToOnce('ready', this.trackProgress);\n        }\n        manualProgressOff() {\n            this.manualProgress = false;\n            this.stopTrackingProgress();\n            this.unlistenTo('durationchange', this.listenToDurationChange);\n        }\n        trackProgress(event) {\n            this.stopTrackingProgress();\n            this.progressInterval = this.setInterval(Fn.bind(this, function () {\n                const numBufferedPercent = this.undefined();\n                if (this.bufferedPercent_ !== numBufferedPercent) {\n                    this.trigger('progress');\n                }\n                this.bufferedPercent_ = numBufferedPercent;\n                if (numBufferedPercent === 1) {\n                    this.stopTrackingProgress();\n                }\n            }), 500);\n        }\n        onDurationChange(event) {\n            this.duration_ = this.duration();\n        }\n        buffered() {\n            return timeRages.createTimeRange(0, 0);\n        }\n        bufferedPercent() {\n            return buffer.bufferedPercent(this.buffered(), this.duration_);\n        }\n        stopTrackingProgress() {\n            this.clearInterval(this.progressInterval);\n        }\n        manualTimeUpdatesOn() {\n            this.manualTimeUpdates = true;\n            this.listenTo('play', this.trackCurrentTime);\n            this.listenTo('pause', this.stopTrackingCurrentTime);\n        }\n        manualTimeUpdatesOff() {\n            this.manualTimeUpdates = false;\n            this.stopTrackingCurrentTime();\n            this.unlistenTo('play', this.trackCurrentTime);\n            this.unlistenTo('pause', this.stopTrackingCurrentTime);\n        }\n        trackCurrentTime() {\n            if (this.currentTimeInterval) {\n                this.stopTrackingCurrentTime();\n            }\n            this.currentTimeInterval = this.setInterval(function () {\n                this.trigger({\n                    type: 'timeupdate',\n                    target: this,\n                    manuallyTriggered: true\n                });\n            }, 250);\n        }\n        stopTrackingCurrentTime() {\n            this.clearInterval(this.currentTimeInterval);\n            this.trigger({\n                type: 'timeupdate',\n                target: this,\n                manuallyTriggered: true\n            });\n        }\n        dispose() {\n            this.clearTracks(TRACK_TYPES.NORMAL.names);\n            if (this.manualProgress) {\n                this.manualProgressOff();\n            }\n            if (this.manualTimeUpdates) {\n                this.manualTimeUpdatesOff();\n            }\n            super.dispose();\n        }\n        clearTracks(types) {\n            types = [].concat(types);\n            types.forEach(type => {\n                const list = this[`${ type }Tracks`]() || [];\n                let i = list.length;\n                while (i--) {\n                    const track = list[i];\n                    if (type === 'text') {\n                        this.removeRemoteTextTrack(track);\n                    }\n                    list.removeTrack(track);\n                }\n            });\n        }\n        cleanupAutoTextTracks() {\n            const list = this.autoRemoteTextTracks_ || [];\n            let i = list.length;\n            while (i--) {\n                const track = list[i];\n                this.removeRemoteTextTrack(track);\n            }\n        }\n        reset() {\n        }\n        crossOrigin() {\n        }\n        setCrossOrigin() {\n        }\n        error(err) {\n            if (err !== undefined) {\n                this.error_ = new MediaError(err);\n                this.trigger('error');\n            }\n            return this.error_;\n        }\n        played() {\n            if (this.hasStarted_) {\n                return timeRages.createTimeRange(0, 0);\n            }\n            return timeRages.createTimeRange();\n        }\n        play() {\n        }\n        setScrubbing() {\n        }\n        scrubbing() {\n        }\n        setCurrentTime() {\n            if (this.manualTimeUpdates) {\n                this.trigger({\n                    type: 'timeupdate',\n                    target: this,\n                    manuallyTriggered: true\n                });\n            }\n        }\n        initTrackListeners() {\n            TRACK_TYPES.NORMAL.names.forEach(name => {\n                const props = TRACK_TYPES.NORMAL[name];\n                const trackListChanges = () => {\n                    this.trigger(`${ name }trackchange`);\n                };\n                const tracks = this[props.getterName]();\n                tracks.addEventListener('removetrack', trackListChanges);\n                tracks.addEventListener('addtrack', trackListChanges);\n                this.listenTo('dispose', () => {\n                    tracks.removeEventListener('removetrack', trackListChanges);\n                    tracks.removeEventListener('addtrack', trackListChanges);\n                });\n            });\n        }\n        addWebVttScript_() {\n            if (window.WebVTT) {\n                return;\n            }\n            if (document.body.contains(this.el())) {\n                if (!this.options_['vtt.js'] && obj.isPlain(vtt) && Object.keys(vtt).length > 0) {\n                    this.trigger('vttjsloaded');\n                    return;\n                }\n                const script = document.createElement('script');\n                script.src = this.options_['vtt.js'] || 'https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js';\n                script.onload = () => {\n                    this.trigger('vttjsloaded');\n                };\n                script.onerror = () => {\n                    this.trigger('vttjserror');\n                };\n                this.listenTo('dispose', () => {\n                    script.onload = null;\n                    script.onerror = null;\n                });\n                window.WebVTT = true;\n                this.el().parentNode.appendChild(script);\n            } else {\n                this.ready(this.addWebVttScript_);\n            }\n        }\n        emulateTextTracks() {\n            const tracks = this.textTracks();\n            const remoteTracks = this.remoteTextTracks();\n            const handleAddTrack = e => tracks.addTrack(e.track);\n            const handleRemoveTrack = e => tracks.removeTrack(e.track);\n            remoteTracks.on('addtrack', handleAddTrack);\n            remoteTracks.on('removetrack', handleRemoveTrack);\n            this.addWebVttScript_();\n            const updateDisplay = () => this.trigger('texttrackchange');\n            const textTracksChanges = () => {\n                updateDisplay();\n                for (let i = 0; i < tracks.length; i++) {\n                    const track = tracks[i];\n                    track.removeEventListener('cuechange', updateDisplay);\n                    if (track.mode === 'showing') {\n                        track.addEventListener('cuechange', updateDisplay);\n                    }\n                }\n            };\n            textTracksChanges();\n            tracks.addEventListener('change', textTracksChanges);\n            tracks.addEventListener('addtrack', textTracksChanges);\n            tracks.addEventListener('removetrack', textTracksChanges);\n            this.listenTo('dispose', function () {\n                remoteTracks.off('addtrack', handleAddTrack);\n                remoteTracks.off('removetrack', handleRemoveTrack);\n                tracks.removeEventListener('change', textTracksChanges);\n                tracks.removeEventListener('addtrack', textTracksChanges);\n                tracks.removeEventListener('removetrack', textTracksChanges);\n                for (let i = 0; i < tracks.length; i++) {\n                    const track = tracks[i];\n                    track.removeEventListener('cuechange', updateDisplay);\n                }\n            });\n        }\n        addTextTrack(kind, label, language) {\n            if (!kind) {\n                throw new Error('TextTrack kind is required but was not provided');\n            }\n            return createTrackHelper(this, kind, label, language);\n        }\n        createRemoteTextTrack(options) {\n            const track = mergeOptions(options, { tech: this });\n            return new TRACK_TYPES.REMOTE.remoteTextEl.TrackClass(track);\n        }\n        addRemoteTextTrack(options = {}, manualCleanup) {\n            const htmlTrackElement = this.createRemoteTextTrack(options);\n            if (manualCleanup !== true && manualCleanup !== false) {\n                log.warn('Calling addRemoteTextTrack without explicitly setting the \"manualCleanup\" parameter to `true` is deprecated and default to `false` in future version of video.js');\n                manualCleanup = true;\n            }\n            this.remoteTextTrackEls().addTrackElement_(htmlTrackElement);\n            this.remoteTextTracks().addTrack(htmlTrackElement.track);\n            if (manualCleanup !== true) {\n                this.ready(() => this.autoRemoteTextTracks_.addTrack(htmlTrackElement.track));\n            }\n            return htmlTrackElement;\n        }\n        removeRemoteTextTrack(track) {\n            const trackElement = this.remoteTextTrackEls().getTrackElementByTrack_(track);\n            this.remoteTextTrackEls().removeTrackElement_(trackElement);\n            this.remoteTextTracks().removeTrack(track);\n            this.autoRemoteTextTracks_.removeTrack(track);\n        }\n        getVideoPlaybackQuality() {\n            return {};\n        }\n        requestPictureInPicture() {\n            const PromiseClass = this.options_.Promise || window.Promise;\n            if (PromiseClass) {\n                return PromiseClass.reject();\n            }\n        }\n        disablePictureInPicture() {\n            return true;\n        }\n        setDisablePictureInPicture() {\n        }\n        setPoster() {\n        }\n        playsinline() {\n        }\n        setPlaysinline() {\n        }\n        overrideNativeAudioTracks() {\n        }\n        overrideNativeVideoTracks() {\n        }\n        canPlayType() {\n            return '';\n        }\n        static canPlayType() {\n            return '';\n        }\n        static canPlaySource(srcObj, options) {\n            return Tech.canPlayType(srcObj.type);\n        }\n        static isTech(component) {\n            return component.prototype instanceof Tech || component instanceof Tech || component === Tech;\n        }\n        static registerTech(name, tech) {\n            if (!Tech.techs_) {\n                Tech.techs_ = {};\n            }\n            if (!Tech.isTech(tech)) {\n                throw new Error(`Tech ${ name } must be a Tech`);\n            }\n            if (!Tech.canPlayType) {\n                throw new Error('Techs must have a static canPlayType method on them');\n            }\n            if (!Tech.canPlaySource) {\n                throw new Error('Techs must have a static canPlaySource method on them');\n            }\n            name = stringCases.toTitleCase(name);\n            Tech.techs_[name] = tech;\n            Tech.techs_[stringCases.toLowerCase(name)] = tech;\n            if (name !== 'Tech') {\n                Tech.defaultTechOrder_.push(name);\n            }\n            return tech;\n        }\n        static getTech(name) {\n            if (!name) {\n                return;\n            }\n            if (Tech.techs_ && Tech.techs_[name]) {\n                return Tech.techs_[name];\n            }\n            name = stringCases.toTitleCase(name);\n            if (window && window.videojs && window.videojs[name]) {\n                log.warn(`The ${ name } tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`);\n                return window.videojs[name];\n            }\n        }\n    }\n    TRACK_TYPES.ALL.names.forEach(function (name) {\n        const props = TRACK_TYPES.ALL[name];\n        Tech.prototype[props.getterName] = function () {\n            this[props.privateName] = this[props.privateName] || new props.ListClass();\n            return this[props.privateName];\n        };\n    });\n    Tech.prototype.featuresVolumeControl = true;\n    Tech.prototype.featuresMuteControl = true;\n    Tech.prototype.featuresFullscreenResize = false;\n    Tech.prototype.featuresPlaybackRate = false;\n    Tech.prototype.featuresProgressEvents = false;\n    Tech.prototype.featuresSourceset = false;\n    Tech.prototype.featuresTimeupdateEvents = false;\n    Tech.prototype.featuresNativeTextTracks = false;\n    Tech.withSourceHandlers = function (_Tech) {\n        _Tech.registerSourceHandler = function (handler, index) {\n            let handlers = _Tech.sourceHandlers;\n            if (!handlers) {\n                handlers = _Tech.sourceHandlers = [];\n            }\n            if (index === undefined) {\n                index = handlers.length;\n            }\n            handlers.splice(index, 0, handler);\n        };\n        _Tech.canPlayType = function (type) {\n            const handlers = _Tech.sourceHandlers || [];\n            let can;\n            for (let i = 0; i < handlers.length; i++) {\n                can = handlers[i].canPlayType(type);\n                if (can) {\n                    return can;\n                }\n            }\n            return '';\n        };\n        _Tech.selectSourceHandler = function (source, options) {\n            const handlers = _Tech.sourceHandlers || [];\n            let can;\n            for (let i = 0; i < handlers.length; i++) {\n                can = handlers[i].canHandleSource(source, options);\n                if (can) {\n                    return handlers[i];\n                }\n            }\n            return null;\n        };\n        _Tech.canPlaySource = function (srcObj, options) {\n            const sh = _Tech.selectSourceHandler(srcObj, options);\n            if (sh) {\n                return sh.canHandleSource(srcObj, options);\n            }\n            return '';\n        };\n        const deferrable = [\n            'seekable',\n            'seeking',\n            'duration'\n        ];\n        deferrable.forEach(function (fnName) {\n            const originalFn = this[fnName];\n            if (typeof originalFn !== 'function') {\n                return;\n            }\n            this[fnName] = function () {\n                if (this.sourceHandler_ && this.sourceHandler_[fnName]) {\n                    return this.sourceHandler_[fnName].apply(this.sourceHandler_, arguments);\n                }\n                return originalFn.apply(this, arguments);\n            };\n        }, _Tech.prototype);\n        _Tech.prototype.setSource = function (source) {\n            let sh = _Tech.selectSourceHandler(source, this.options_);\n            if (!sh) {\n                if (_Tech.nativeSourceHandler) {\n                    sh = _Tech.nativeSourceHandler;\n                } else {\n                    log.error('No source handler found for the current source.');\n                }\n            }\n            this.disposeSourceHandler();\n            this.unlistenTo('dispose', this.disposeSourceHandler);\n            if (sh !== _Tech.nativeSourceHandler) {\n                this.currentSource_ = source;\n            }\n            this.sourceHandler_ = sh.handleSource(source, this, this.options_);\n            this.listenToOnce('dispose', this.disposeSourceHandler);\n        };\n        _Tech.prototype.disposeSourceHandler = function () {\n            if (this.currentSource_) {\n                this.clearTracks([\n                    'audio',\n                    'video'\n                ]);\n                this.currentSource_ = null;\n            }\n            this.cleanupAutoTextTracks();\n            if (this.sourceHandler_) {\n                if (this.sourceHandler_.dispose) {\n                    this.sourceHandler_.dispose();\n                }\n                this.sourceHandler_ = null;\n            }\n        };\n    };\n    Component.registerComponent('Tech', Tech);\n    Tech.registerTech('Tech', Tech);\n    Tech.defaultTechOrder_ = [];\n    return Tech;\n});"]}