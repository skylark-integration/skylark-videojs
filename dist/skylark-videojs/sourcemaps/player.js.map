{"version":3,"sources":["player.js"],"names":["define","document","Component","evented","Events","Dom","Fn","Guid","browser","log","stringCases","timeRages","buffer","stylesheet","FullscreenApi","MediaError","safeParseTuple","obj","mergeOptions","promise","textTrackConverter","ModalDialog","Tech","middleware","TRACK_TYPES","filterSource","mimetypes","keycode","TECH_EVENTS_RETRIGGER","TECH_EVENTS_QUEUE","canplay","canplaythrough","playing","seeked","BREAKPOINT_ORDER","BREAKPOINT_CLASSES","forEach","k","v","charAt","substring","DEFAULT_BREAKPOINTS","tiny","xsmall","small","medium","large","xlarge","huge","Infinity","Player","[object Object]","tag","options","ready","id","newGUID","assign","getTagSettings","initChildren","createEl","reportTouchActivity","language","closest","getAttribute","element","nodeType","getAttributes","hasOwnProperty","parentNode","super","this","boundDocumentFullscreenChange_","e","documentFullscreenChange_","boundFullWindowOnEscKey_","fullWindowOnEscKey","isFullscreen_","createLogger","id_","fsApi_","isPosterFromTech_","queuedCallbacks_","isReady_","hasStarted_","userActive_","debugEnabled_","options_","techOrder","length","Error","tagAttributes","languages","languagesToLower","Object","getOwnPropertyNames","name","toLowerCase","languages_","prototype","resetCache_","poster_","poster","controls_","controls","removeAttribute","changingSrc_","playCallbacks_","playTerminatedQueue_","hasAttribute","autoplay","plugins","keys","scrubbing_","el_","requestFullscreen","on","fullscreenchange","listenTo","fluid_","updateStyleEl_","playerOptionsCopy","debug","playerOptions","middleware_","isAudio","nodeName","addClass","setAttribute","localize","flexNotSupported_","TOUCH_ENABLED","IS_IOS","players","userActive","reportUserActivity","listenToOnce","listenForUserActivity_","handleStageClick_","handleKeyDown","handleLanguagechange","breakpoints","responsive","trigger","unlistenTo","off","styleEl_","removeChild","player","tech_","dispose","playerElIngest_","clearCacheForPlayer","ALL","names","list","getterName","el","playerElIngest","divEmbed","tagName","attrs","createElement","children","appendChild","firstChild","hasClass","tabindex","IE_VERSION","IS_CHROME","IS_WINDOWS","role","width","height","attr","playerId","className","window","VIDEOJS_NO_DYNAMIC_STYLE","createStyleElement","defaultsStyleEl","$","head","insertBefore","nextSibling","fill_","fill","fluid","aspectRatio","crossOrigin","crossorigin","links","getElementsByTagName","i","linkEl","item","initNetworkState_","networkState","prependTo","children_","unshift","language_","value","techGet_","techCall_","warn","dimension","privDimension","undefined","parsedVal","parseFloat","isNaN","error","bool","isEvented","addEventedCallback","removeClass","ratio","aspectRatio_","test","width_","height_","techEl","idClass","ratioParts","videoWidth","videoHeight","split","ratioMultiplier","setTextContent","techName","source","unloadTech_","titleTechName","toTitleCase","camelTechName","slice","getTech","disposeMediaElement","techName_","techOptions","nativeControlsForTouch","techId","playsinline","preload","loop","disablePictureInPicture","muted","vtt.js","canOverridePoster","techCanOverridePoster","enableSourceset","Promise","props","privateName","src","cache_","currentTime","startTime","TechClass","bind","handleTechReady_","jsonToTextTracks","textTracksJson_","event","eventObj","playbackRate","seeking","push","callback","handleTechLoadStart_","handleTechSourceset_","handleTechWaiting_","handleTechEnded_","handleTechSeeking_","handleTechPlay_","handleTechFirstPlay_","handleTechPause_","handleTechDurationChange_","handleTechFullscreenChange_","handleTechFullscreenError_","handleTechEnterPictureInPicture_","handleTechLeavePictureInPicture_","handleTechError_","handleTechPosterChange_","handleTechTextData_","handleTechRateChange_","usingNativeControls","addTechControlsListeners_","textTracksToJson","safety","removeTechControlsListeners_","handleTechClick_","handleTechDoubleClick_","handleTechTouchStart_","handleTechTouchMove_","handleTechTouchEnd_","handleTechTap_","triggerReady","volume","paused","hasStarted","manualAutoplay_","type","previouslyMuted","restoreMuted","mutedPromise","play","isPromise","catch","then","srcObj","sources","findMimetype","matchingSources","filter","s","sourceElSources","sourceEls","$$","matchingSourceEls","sourceObj","updateSourceCaches","updateSourceCaches_","playerSrc","currentSource","eventSrc","lastSource_","tech","any","techSrc","techGet","request","lastPlaybackRate","queued","timeWhenWaiting","timeUpdateListener","starttime","pause","duration","isSingleLeftClick","silencePromise","Array","some","call","contains","target","userActions","doubleClick","isFullscreen","exitFullscreen","userWasActive","cancelable","preventDefault","targetPlayer","isFs","fullscreenElement","matches","fullscreen","msMatchesSelector","data","nativeIOSFullscreen","toggleClass","err","isInPictureInPicture","arguments","initTime","inactivityTimeout","NaN","lastVolume","defaultPlaybackRate","media","method","arg","allowedSetters","set","allowedMediators","mediate","allowedGetters","get","PromiseClass","resolve","play_","isSrcReady","Boolean","currentSrc","waitToPlay_","IS_ANY_SAFARI","load","val","runPlayTerminatedQueue_","runPlayCallbacks_","queue","q","callbacks","cb","createTimeRange","isScrubbing","seconds","applyInitTime_","Math","floor","buffered","bufferedPercent","end","percentAsDecimal","vol","max","min","lastVolume_","defaultMuted","isFS","oldValue","prefixed","toggleFullscreenClass_","fullscreenOptions","self","reject","offHandler","errorHandler","changeHandler","one","requestFullscreenHelper_","fsOptions","supportsFullScreen","enterFullWindow","exitFullscreenHelper_","exitFullWindow","isFullWindow","docOrigOverflow","documentElement","style","overflow","body","isEventKey","isPiP","isInPictureInPicture_","togglePictureInPictureClass_","exitPictureInPicture","hotkeys","isContentEditable","indexOf","excludeElement","ownerDocument","activeElement","handleHotkeys","fullscreenKey","keydownEvent","muteKey","playPauseKey","stopPropagation","FSToggle","getComponent","fullscreenEnabled","handleClick","can","j","isSupported","canPlayType","techs","map","findFirstPassingTechSourcePair","outerArray","innerArray","tester","found","outerChoice","innerChoice","foundSourceAndTech","finder","canPlaySource","sourceOrder","fn","a","b","flip","setSource","middlewareSource","mws","src_","setTimeout","code","message","notSupportedMessage","setTech","sourceTech","selectSource","titleCaseEquals","constructor","loadTech_","doReset_","playPromise","clearTracks","resetControlBarUI_","resetProgressBar_","resetPlaybackRate_","resetVolumeBar_","durationDisplay","remainingTimeDisplay","controlBar","updateContent","techAutoplay","newPoster","usingNativeControls_","error_","suppressNotSupportedError","triggerSuppressedError","errorDisplay","close","errorTypes","userActivity_","mouseInProgress","lastMoveX","lastMoveY","handleActivity","handleMouseUpAndMouseLeave","clearInterval","setInterval","screenX","screenY","getChild","IS_ANDROID","clearTimeout","timeout","rate","featuresPlaybackRate","isAudio_","kind","label","addTextTrack","manualCleanup","addRemoteTextTrack","track","removeRemoteTextTrack","String","tracks","content","modal","addChild","open","currentBreakpoint","currentWidth","candidateBreakpoint","breakpoints_","breakpoint_","currentBreakpointClass","updateCurrentBreakpoint_","responsive_","removeCurrentBreakpoint_","reset","artwork","textTracks","getMimetype","isArray","tt","currentSources","remoteTextTracks","baseOptions","tagOptions","dataSetup","hasChildNodes","childNodes","child","childName","elem","enabled","previousLogLevel_","level","ListClass","navigator","defaultTechOrder_","html5","playbackRates","liveui","userLanguage","navigationUI","registerComponent"],"mappings":";;;;;;;AAAAA,QACI,iCACA,cACA,mBACA,iBACA,cACA,aACA,eACA,kBACA,cACA,uBACA,sBACA,iBACA,qBACA,mBACA,gBACA,yBACA,cACA,wBACA,kBACA,qCACA,iBACA,cACA,oBACA,uBACA,wBACA,oBACA,kBACA,gBACA,iBACA,8BACA,oBACA,oBACA,iBACA,4BACA,kBACA,+BACA,mBACA,iBACA,gBACD,SACCC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,aACA,MAAMC,GACF,WACA,QACA,UACA,UACA,UACA,iBACA,aACA,aACA,SACA,eACA,mBAEEC,GACFC,QAAS,UACTC,eAAgB,iBAChBC,QAAS,UACTC,OAAQ,UAENC,GACF,OACA,SACA,QACA,SACA,QACA,SACA,QAEEC,KACND,EAAiBE,QAAQC,IACrB,MAAMC,EAAoB,MAAhBD,EAAEE,OAAO,QAAmBF,EAAEG,UAAU,KAAQH,EAC1DF,EAAmBE,iBAAoBC,MAE3C,MAAMG,GACFC,KAAM,IACNC,OAAQ,IACRC,MAAO,IACPC,OAAQ,IACRC,MAAO,KACPC,OAAQ,KACRC,KAAMC,EAAAA,SAEJC,UAAehD,EACjBiD,YAAYC,EAAKC,EAASC,GAOtB,GANAF,EAAIG,GAAKH,EAAIG,IAAMF,EAAQE,iBAAoBhD,EAAKiD,aACpDH,EAAUpC,EAAIwC,OAAOP,EAAOQ,eAAeN,GAAMC,IACzCM,cAAe,EACvBN,EAAQO,UAAW,EACnBP,EAAQlD,SAAU,EAClBkD,EAAQQ,qBAAsB,GACzBR,EAAQS,SACT,GAA2B,mBAAhBV,EAAIW,QAAwB,CACnC,MAAMA,EAAUX,EAAIW,QAAQ,UACxBA,GAAWA,EAAQC,eACnBX,EAAQS,SAAWC,EAAQC,aAAa,aAEzC,CACH,IAAIC,EAAUb,EACd,KAAOa,GAAgC,IAArBA,EAAQC,UAAgB,CACtC,GAAI7D,EAAI8D,cAAcF,GAAS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","file":"../player.js","sourcesContent":["define([\n    'skylark-langx-globals/document',\n    './component',\n    './mixins/evented',\n    './utils/events',\n    './utils/dom',\n    './utils/fn',\n    './utils/guid',\n    './utils/browser',\n    './utils/log',\n    './utils/string-cases',\n    './utils/time-ranges',\n    './utils/buffer',\n    './utils/stylesheet',\n    './fullscreen-api',\n    './media-error',\n    './utils/safeParseTuple',\n    './utils/obj',\n    './utils/merge-options',\n    './utils/promise',\n    './tracks/text-track-list-converter',\n    './modal-dialog',\n    './tech/tech',\n    './tech/middleware',\n    './tracks/track-types',\n    './utils/filter-source',\n    './utils/mimetypes',\n    './utils/keycode',\n    './tech/loader',\n    './poster-image',\n    './tracks/text-track-display',\n    './loading-spinner',\n    './big-play-button',\n    './close-button',\n    './control-bar/control-bar',\n    './error-display',\n    './tracks/text-track-settings',\n    './resize-manager',\n    './live-tracker',\n    './tech/html5'\n], function (\n    document,\n    Component,\n    evented, \n    Events, \n    Dom, \n    Fn, \n    Guid, \n    browser, \n    log, \n    stringCases, \n    timeRages, \n    buffer, \n    stylesheet, \n    FullscreenApi, \n    MediaError, \n    safeParseTuple, \n    obj, \n    mergeOptions, \n    promise, \n    textTrackConverter, \n    ModalDialog, \n    Tech, \n    middleware, \n    TRACK_TYPES, \n    filterSource, \n    mimetypes, \n    keycode\n) {\n    'use strict';\n    const TECH_EVENTS_RETRIGGER = [\n        'progress',\n        'abort',\n        'suspend',\n        'emptied',\n        'stalled',\n        'loadedmetadata',\n        'loadeddata',\n        'timeupdate',\n        'resize',\n        'volumechange',\n        'texttrackchange'\n    ];\n    const TECH_EVENTS_QUEUE = {\n        canplay: 'CanPlay',\n        canplaythrough: 'CanPlayThrough',\n        playing: 'Playing',\n        seeked: 'Seeked'\n    };\n    const BREAKPOINT_ORDER = [\n        'tiny',\n        'xsmall',\n        'small',\n        'medium',\n        'large',\n        'xlarge',\n        'huge'\n    ];\n    const BREAKPOINT_CLASSES = {};\n    BREAKPOINT_ORDER.forEach(k => {\n        const v = k.charAt(0) === 'x' ? `x-${ k.substring(1) }` : k;\n        BREAKPOINT_CLASSES[k] = `vjs-layout-${ v }`;\n    });\n    const DEFAULT_BREAKPOINTS = {\n        tiny: 210,\n        xsmall: 320,\n        small: 425,\n        medium: 768,\n        large: 1440,\n        xlarge: 2560,\n        huge: Infinity\n    };\n    class Player extends Component {\n        constructor(tag, options, ready) {\n            tag.id = tag.id || options.id || `vjs_video_${ Guid.newGUID() }`;\n            options = obj.assign(Player.getTagSettings(tag), options);\n            options.initChildren = false;\n            options.createEl = false;\n            options.evented = false;\n            options.reportTouchActivity = false;\n            if (!options.language) {\n                if (typeof tag.closest === 'function') {\n                    const closest = tag.closest('[lang]');\n                    if (closest && closest.getAttribute) {\n                        options.language = closest.getAttribute('lang');\n                    }\n                } else {\n                    let element = tag;\n                    while (element && element.nodeType === 1) {\n                        if (Dom.getAttributes(element).hasOwnProperty('lang')) {\n                            options.language = element.getAttribute('lang');\n                            break;\n                        }\n                        element = element.parentNode;\n                    }\n                }\n            }\n            super(null, options, ready);\n            this.boundDocumentFullscreenChange_ = e => this.documentFullscreenChange_(e);\n            this.boundFullWindowOnEscKey_ = e => this.fullWindowOnEscKey(e);\n            this.isFullscreen_ = false;\n            this.log = log.createLogger(this.id_);\n            this.fsApi_ = FullscreenApi;\n            this.isPosterFromTech_ = false;\n            this.queuedCallbacks_ = [];\n            this.isReady_ = false;\n            this.hasStarted_ = false;\n            this.userActive_ = false;\n            this.debugEnabled_ = false;\n            if (!this.options_ || !this.options_.techOrder || !this.options_.techOrder.length) {\n                throw new Error('No techOrder specified. Did you overwrite ' + 'videojs.options instead of just changing the ' + 'properties you want to override?');\n            }\n            this.tag = tag;\n            this.tagAttributes = tag && Dom.getAttributes(tag);\n            this.language(this.options_.language);\n            if (options.languages) {\n                const languagesToLower = {};\n                Object.getOwnPropertyNames(options.languages).forEach(function (name) {\n                    languagesToLower[name.toLowerCase()] = options.languages[name];\n                });\n                this.languages_ = languagesToLower;\n            } else {\n                this.languages_ = Player.prototype.options_.languages;\n            }\n            this.resetCache_();\n            this.poster_ = options.poster || '';\n            this.controls_ = !!options.controls;\n            tag.controls = false;\n            tag.removeAttribute('controls');\n            this.changingSrc_ = false;\n            this.playCallbacks_ = [];\n            this.playTerminatedQueue_ = [];\n            if (tag.hasAttribute('autoplay')) {\n                this.autoplay(true);\n            } else {\n                this.autoplay(this.options_.autoplay);\n            }\n            if (options.plugins) {\n                Object.keys(options.plugins).forEach(name => {\n                    if (typeof this[name] !== 'function') {\n                        throw new Error(`plugin \"${ name }\" does not exist`);\n                    }\n                });\n            }\n            this.scrubbing_ = false;\n            this.el_ = this.createEl();\n            //evented(this, { eventBusKey: 'el_' });\n            if (this.fsApi_.requestFullscreen) {\n                Events.on(document, this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_);\n                this.listenTo(this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_);\n            }\n            if (this.fluid_) {\n                this.listenTo([\n                    'playerreset',\n                    'resize'\n                ], this.updateStyleEl_);\n            }\n            const playerOptionsCopy = mergeOptions(this.options_);\n            if (options.plugins) {\n                Object.keys(options.plugins).forEach(name => {\n                    this[name](options.plugins[name]);\n                });\n            }\n            if (options.debug) {\n                this.debug(true);\n            }\n            this.options_.playerOptions = playerOptionsCopy;\n            this.middleware_ = [];\n            this.initChildren();\n            this.isAudio(tag.nodeName.toLowerCase() === 'audio');\n            if (this.controls()) {\n                this.addClass('vjs-controls-enabled');\n            } else {\n                this.addClass('vjs-controls-disabled');\n            }\n            this.el_.setAttribute('role', 'region');\n            if (this.isAudio()) {\n                this.el_.setAttribute('aria-label', this.localize('Audio Player'));\n            } else {\n                this.el_.setAttribute('aria-label', this.localize('Video Player'));\n            }\n            if (this.isAudio()) {\n                this.addClass('vjs-audio');\n            }\n            if (this.flexNotSupported_()) {\n                this.addClass('vjs-no-flex');\n            }\n            if (browser.TOUCH_ENABLED) {\n                this.addClass('vjs-touch-enabled');\n            }\n            if (!browser.IS_IOS) {\n                this.addClass('vjs-workinghover');\n            }\n            Player.players[this.id_] = this;\n            const majorVersion = \"7\";\n            this.addClass(`vjs-v${ majorVersion }`);\n            this.userActive(true);\n            this.reportUserActivity();\n            this.listenToOnce('play', this.listenForUserActivity_);\n            this.listenTo('stageclick', this.handleStageClick_);\n            this.listenTo('keydown', this.handleKeyDown);\n            this.listenTo('languagechange', this.handleLanguagechange);\n            this.breakpoints(this.options_.breakpoints);\n            this.responsive(this.options_.responsive);\n        }\n        dispose() {\n            this.trigger('dispose');\n            this.unlistenTo('dispose');\n            Events.off(document, this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_);\n            Events.off(document, 'keydown', this.boundFullWindowOnEscKey_);\n            if (this.styleEl_ && this.styleEl_.parentNode) {\n                this.styleEl_.parentNode.removeChild(this.styleEl_);\n                this.styleEl_ = null;\n            }\n            Player.players[this.id_] = null;\n            if (this.tag && this.tag.player) {\n                this.tag.player = null;\n            }\n            if (this.el_ && this.el_.player) {\n                this.el_.player = null;\n            }\n            if (this.tech_) {\n                this.tech_.dispose();\n                this.isPosterFromTech_ = false;\n                this.poster_ = '';\n            }\n            if (this.playerElIngest_) {\n                this.playerElIngest_ = null;\n            }\n            if (this.tag) {\n                this.tag = null;\n            }\n            middleware.clearCacheForPlayer(this);\n            TRACK_TYPES.ALL.names.forEach(name => {\n                const props = TRACK_TYPES[name];\n                const list = this[props.getterName]();\n                if (list && list.off) {\n                    list.off();\n                }\n            });\n            super.dispose();\n        }\n        createEl() {\n            let tag = this.tag;\n            let el;\n            let playerElIngest = this.playerElIngest_ = tag.parentNode && tag.parentNode.hasAttribute && tag.parentNode.hasAttribute('data-vjs-player');\n            const divEmbed = this.tag.tagName.toLowerCase() === 'video-js';\n            if (playerElIngest) {\n                el = this.el_ = tag.parentNode;\n            } else if (!divEmbed) {\n                el = this.el_ = super.createEl('div');\n            }\n            const attrs = Dom.getAttributes(tag);\n            if (divEmbed) {\n                el = this.el_ = tag;\n                tag = this.tag = document.createElement('video');\n                while (el.children.length) {\n                    tag.appendChild(el.firstChild);\n                }\n                if (!Dom.hasClass(el, 'video-js')) {\n                    Dom.addClass(el, 'video-js');\n                }\n                el.appendChild(tag);\n                playerElIngest = this.playerElIngest_ = el;\n                Object.keys(el).forEach(k => {\n                    try {\n                        tag[k] = el[k];\n                    } catch (e) {\n                    }\n                });\n            }\n            tag.setAttribute('tabindex', '-1');\n            attrs.tabindex = '-1';\n            if (browser.IE_VERSION || browser.IS_CHROME && browser.IS_WINDOWS) {\n                tag.setAttribute('role', 'application');\n                attrs.role = 'application';\n            }\n            tag.removeAttribute('width');\n            tag.removeAttribute('height');\n            if ('width' in attrs) {\n                delete attrs.width;\n            }\n            if ('height' in attrs) {\n                delete attrs.height;\n            }\n            Object.getOwnPropertyNames(attrs).forEach(function (attr) {\n                if (!(divEmbed && attr === 'class')) {\n                    el.setAttribute(attr, attrs[attr]);\n                }\n                if (divEmbed) {\n                    tag.setAttribute(attr, attrs[attr]);\n                }\n            });\n            tag.playerId = tag.id;\n            tag.id += '_html5_api';\n            tag.className = 'vjs-tech';\n            tag.player = el.player = this;\n            this.addClass('vjs-paused');\n            if (window.VIDEOJS_NO_DYNAMIC_STYLE !== true) {\n                this.styleEl_ = stylesheet.createStyleElement('vjs-styles-dimensions');\n                const defaultsStyleEl = Dom.$('.vjs-styles-defaults');\n                const head = Dom.$('head');\n                head.insertBefore(this.styleEl_, defaultsStyleEl ? defaultsStyleEl.nextSibling : head.firstChild);\n            }\n            this.fill_ = false;\n            this.fluid_ = false;\n            this.width(this.options_.width);\n            this.height(this.options_.height);\n            this.fill(this.options_.fill);\n            this.fluid(this.options_.fluid);\n            this.aspectRatio(this.options_.aspectRatio);\n            this.crossOrigin(this.options_.crossOrigin || this.options_.crossorigin);\n            const links = tag.getElementsByTagName('a');\n            for (let i = 0; i < links.length; i++) {\n                const linkEl = links.item(i);\n                Dom.addClass(linkEl, 'vjs-hidden');\n                linkEl.setAttribute('hidden', 'hidden');\n            }\n            tag.initNetworkState_ = tag.networkState;\n            if (tag.parentNode && !playerElIngest) {\n                tag.parentNode.insertBefore(el, tag);\n            }\n            Dom.prependTo(tag, el);\n            this.children_.unshift(tag);\n            this.el_.setAttribute('lang', this.language_);\n            this.el_ = el;\n            return el;\n        }\n        crossOrigin(value) {\n            if (!value) {\n                return this.techGet_('crossOrigin');\n            }\n            if (value !== 'anonymous' && value !== 'use-credentials') {\n                log.warn(`crossOrigin must be \"anonymous\" or \"use-credentials\", given \"${ value }\"`);\n                return;\n            }\n            this.techCall_('setCrossOrigin', value);\n            return;\n        }\n        width(value) {\n            return this.dimension('width', value);\n        }\n        height(value) {\n            return this.dimension('height', value);\n        }\n        dimension(dimension, value) {\n            const privDimension = dimension + '_';\n            if (value === undefined) {\n                return this[privDimension] || 0;\n            }\n            if (value === '' || value === 'auto') {\n                this[privDimension] = undefined;\n                this.updateStyleEl_();\n                return;\n            }\n            const parsedVal = parseFloat(value);\n            if (isNaN(parsedVal)) {\n                log.error(`Improper value \"${ value }\" supplied for for ${ dimension }`);\n                return;\n            }\n            this[privDimension] = parsedVal;\n            this.updateStyleEl_();\n        }\n        fluid(bool) {\n            if (bool === undefined) {\n                return !!this.fluid_;\n            }\n            this.fluid_ = !!bool;\n            if (evented.isEvented(this)) {\n                this.unlistenTo([\n                    'playerreset',\n                    'resize'\n                ], this.updateStyleEl_);\n            }\n            if (bool) {\n                this.addClass('vjs-fluid');\n                this.fill(false);\n                evented.addEventedCallback(this, () => {\n                    this.listenTo([\n                        'playerreset',\n                        'resize'\n                    ], this.updateStyleEl_);\n                });\n            } else {\n                this.removeClass('vjs-fluid');\n            }\n            this.updateStyleEl_();\n        }\n        fill(bool) {\n            if (bool === undefined) {\n                return !!this.fill_;\n            }\n            this.fill_ = !!bool;\n            if (bool) {\n                this.addClass('vjs-fill');\n                this.fluid(false);\n            } else {\n                this.removeClass('vjs-fill');\n            }\n        }\n        aspectRatio(ratio) {\n            if (ratio === undefined) {\n                return this.aspectRatio_;\n            }\n            if (!/^\\d+\\:\\d+$/.test(ratio)) {\n                throw new Error('Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.');\n            }\n            this.aspectRatio_ = ratio;\n            this.fluid(true);\n            this.updateStyleEl_();\n        }\n        updateStyleEl_() {\n            if (window.VIDEOJS_NO_DYNAMIC_STYLE === true) {\n                const width = typeof this.width_ === 'number' ? this.width_ : this.options_.width;\n                const height = typeof this.height_ === 'number' ? this.height_ : this.options_.height;\n                const techEl = this.tech_ && this.tech_.el();\n                if (techEl) {\n                    if (width >= 0) {\n                        techEl.width = width;\n                    }\n                    if (height >= 0) {\n                        techEl.height = height;\n                    }\n                }\n                return;\n            }\n            let width;\n            let height;\n            let aspectRatio;\n            let idClass;\n            if (this.aspectRatio_ !== undefined && this.aspectRatio_ !== 'auto') {\n                aspectRatio = this.aspectRatio_;\n            } else if (this.videoWidth() > 0) {\n                aspectRatio = this.videoWidth() + ':' + this.videoHeight();\n            } else {\n                aspectRatio = '16:9';\n            }\n            const ratioParts = aspectRatio.split(':');\n            const ratioMultiplier = ratioParts[1] / ratioParts[0];\n            if (this.width_ !== undefined) {\n                width = this.width_;\n            } else if (this.height_ !== undefined) {\n                width = this.height_ / ratioMultiplier;\n            } else {\n                width = this.videoWidth() || 300;\n            }\n            if (this.height_ !== undefined) {\n                height = this.height_;\n            } else {\n                height = width * ratioMultiplier;\n            }\n            if (/^[^a-zA-Z]/.test(this.id())) {\n                idClass = 'dimensions-' + this.id();\n            } else {\n                idClass = this.id() + '-dimensions';\n            }\n            this.addClass(idClass);\n            stylesheet.setTextContent(this.styleEl_, `\n      .${ idClass } {\n        width: ${ width }px;\n        height: ${ height }px;\n      }\n\n      .${ idClass }.vjs-fluid {\n        padding-top: ${ ratioMultiplier * 100 }%;\n      }\n    `);\n        }\n        loadTech_(techName, source) {\n            if (this.tech_) {\n                this.unloadTech_();\n            }\n            const titleTechName = stringCases.toTitleCase(techName);\n            const camelTechName = techName.charAt(0).toLowerCase() + techName.slice(1);\n            if (titleTechName !== 'Html5' && this.tag) {\n                Tech.getTech('Html5').disposeMediaElement(this.tag);\n                this.tag.player = null;\n                this.tag = null;\n            }\n            this.techName_ = titleTechName;\n            this.isReady_ = false;\n            const autoplay = typeof this.autoplay() === 'string' ? false : this.autoplay();\n            const techOptions = {\n                source,\n                autoplay,\n                'nativeControlsForTouch': this.options_.nativeControlsForTouch,\n                'playerId': this.id(),\n                'techId': `${ this.id() }_${ camelTechName }_api`,\n                'playsinline': this.options_.playsinline,\n                'preload': this.options_.preload,\n                'loop': this.options_.loop,\n                'disablePictureInPicture': this.options_.disablePictureInPicture,\n                'muted': this.options_.muted,\n                'poster': this.poster(),\n                'language': this.language(),\n                'playerElIngest': this.playerElIngest_ || false,\n                'vtt.js': this.options_['vtt.js'],\n                'canOverridePoster': !!this.options_.techCanOverridePoster,\n                'enableSourceset': this.options_.enableSourceset,\n                'Promise': this.options_.Promise\n            };\n            TRACK_TYPES.ALL.names.forEach(name => {\n                const props = TRACK_TYPES.ALL[name];\n                techOptions[props.getterName] = this[props.privateName];\n            });\n            obj.assign(techOptions, this.options_[titleTechName]);\n            obj.assign(techOptions, this.options_[camelTechName]);\n            obj.assign(techOptions, this.options_[techName.toLowerCase()]);\n            if (this.tag) {\n                techOptions.tag = this.tag;\n            }\n            if (source && source.src === this.cache_.src && this.cache_.currentTime > 0) {\n                techOptions.startTime = this.cache_.currentTime;\n            }\n            const TechClass = Tech.getTech(techName);\n            if (!TechClass) {\n                throw new Error(`No Tech named '${ titleTechName }' exists! '${ titleTechName }' should be registered using videojs.registerTech()'`);\n            }\n            this.tech_ = new TechClass(techOptions);\n            this.tech_.ready(Fn.bind(this, this.handleTechReady_), true);\n            textTrackConverter.jsonToTextTracks(this.textTracksJson_ || [], this.tech_);\n            TECH_EVENTS_RETRIGGER.forEach(event => {\n                this.listenTo(this.tech_, event, this[`handleTech${ stringCases.toTitleCase(event) }_`]);\n            });\n            Object.keys(TECH_EVENTS_QUEUE).forEach(event => {\n                this.listenTo(this.tech_, event, eventObj => {\n                    if (this.tech_.playbackRate() === 0 && this.tech_.seeking()) {\n                        this.queuedCallbacks_.push({\n                            callback: this[`handleTech${ TECH_EVENTS_QUEUE[event] }_`].bind(this),\n                            event: eventObj\n                        });\n                        return;\n                    }\n                    this[`handleTech${ TECH_EVENTS_QUEUE[event] }_`](eventObj);\n                });\n            });\n            this.listenTo(this.tech_, 'loadstart', this.handleTechLoadStart_);\n            this.listenTo(this.tech_, 'sourceset', this.handleTechSourceset_);\n            this.listenTo(this.tech_, 'waiting', this.handleTechWaiting_);\n            this.listenTo(this.tech_, 'ended', this.handleTechEnded_);\n            this.listenTo(this.tech_, 'seeking', this.handleTechSeeking_);\n            this.listenTo(this.tech_, 'play', this.handleTechPlay_);\n            this.listenTo(this.tech_, 'firstplay', this.handleTechFirstPlay_);\n            this.listenTo(this.tech_, 'pause', this.handleTechPause_);\n            this.listenTo(this.tech_, 'durationchange', this.handleTechDurationChange_);\n            this.listenTo(this.tech_, 'fullscreenchange', this.handleTechFullscreenChange_);\n            this.listenTo(this.tech_, 'fullscreenerror', this.handleTechFullscreenError_);\n            this.listenTo(this.tech_, 'enterpictureinpicture', this.handleTechEnterPictureInPicture_);\n            this.listenTo(this.tech_, 'leavepictureinpicture', this.handleTechLeavePictureInPicture_);\n            this.listenTo(this.tech_, 'error', this.handleTechError_);\n            this.listenTo(this.tech_, 'loadedmetadata', this.updateStyleEl_);\n            this.listenTo(this.tech_, 'posterchange', this.handleTechPosterChange_);\n            this.listenTo(this.tech_, 'textdata', this.handleTechTextData_);\n            this.listenTo(this.tech_, 'ratechange', this.handleTechRateChange_);\n            this.usingNativeControls(this.techGet_('controls'));\n            if (this.controls() && !this.usingNativeControls()) {\n                this.addTechControlsListeners_();\n            }\n            if (this.tech_.el().parentNode !== this.el() && (titleTechName !== 'Html5' || !this.tag)) {\n                Dom.prependTo(this.tech_.el(), this.el());\n            }\n            if (this.tag) {\n                this.tag.player = null;\n                this.tag = null;\n            }\n        }\n        unloadTech_() {\n            TRACK_TYPES.ALL.names.forEach(name => {\n                const props = TRACK_TYPES.ALL[name];\n                this[props.privateName] = this[props.getterName]();\n            });\n            this.textTracksJson_ = textTrackConverter.textTracksToJson(this.tech_);\n            this.isReady_ = false;\n            this.tech_.dispose();\n            this.tech_ = false;\n            if (this.isPosterFromTech_) {\n                this.poster_ = '';\n                this.trigger('posterchange');\n            }\n            this.isPosterFromTech_ = false;\n        }\n        tech(safety) {\n            if (safety === undefined) {\n                log.warn(\"Using the tech directly can be dangerous. I hope you know what you're doing.\\n\" + 'See https://github.com/videojs/video.js/issues/2617 for more info.\\n');\n            }\n            return this.tech_;\n        }\n        addTechControlsListeners_() {\n            this.removeTechControlsListeners_();\n            this.listenTo(this.tech_, 'mouseup', this.handleTechClick_);\n            this.listenTo(this.tech_, 'dblclick', this.handleTechDoubleClick_);\n            this.listenTo(this.tech_, 'touchstart', this.handleTechTouchStart_);\n            this.listenTo(this.tech_, 'touchmove', this.handleTechTouchMove_);\n            this.listenTo(this.tech_, 'touchend', this.handleTechTouchEnd_);\n            this.listenTo(this.tech_, 'tap', this.handleTechTap_);\n        }\n        removeTechControlsListeners_() {\n            this.unlistenTo(this.tech_, 'tap', this.handleTechTap_);\n            this.unlistenTo(this.tech_, 'touchstart', this.handleTechTouchStart_);\n            this.unlistenTo(this.tech_, 'touchmove', this.handleTechTouchMove_);\n            this.unlistenTo(this.tech_, 'touchend', this.handleTechTouchEnd_);\n            this.unlistenTo(this.tech_, 'mouseup', this.handleTechClick_);\n            this.unlistenTo(this.tech_, 'dblclick', this.handleTechDoubleClick_);\n        }\n        handleTechReady_() {\n            this.triggerReady();\n            if (this.cache_.volume) {\n                this.techCall_('setVolume', this.cache_.volume);\n            }\n            this.handleTechPosterChange_();\n            this.handleTechDurationChange_();\n        }\n        handleTechLoadStart_() {\n            this.removeClass('vjs-ended');\n            this.removeClass('vjs-seeking');\n            this.error(null);\n            this.handleTechDurationChange_();\n            if (!this.paused()) {\n                this.trigger('loadstart');\n                this.trigger('firstplay');\n            } else {\n                this.hasStarted(false);\n                this.trigger('loadstart');\n            }\n            this.manualAutoplay_(this.autoplay());\n        }\n        manualAutoplay_(type) {\n            if (!this.tech_ || typeof type !== 'string') {\n                return;\n            }\n            const muted = () => {\n                const previouslyMuted = this.muted();\n                this.muted(true);\n                const restoreMuted = () => {\n                    this.muted(previouslyMuted);\n                };\n                this.playTerminatedQueue_.push(restoreMuted);\n                const mutedPromise = this.play();\n                if (!promise.isPromise(mutedPromise)) {\n                    return;\n                }\n                return mutedPromise.catch(restoreMuted);\n            };\n            let promise;\n            if (type === 'any' && this.muted() !== true) {\n                promise = this.play();\n                if (promise.isPromise(promise)) {\n                    promise = promise.catch(muted);\n                }\n            } else if (type === 'muted' && this.muted() !== true) {\n                promise = muted();\n            } else {\n                promise = this.play();\n            }\n            if (!promise.isPromise(promise)) {\n                return;\n            }\n            return promise.then(() => {\n                this.trigger({\n                    type: 'autoplay-success',\n                    autoplay: type\n                });\n            }).catch(e => {\n                this.trigger({\n                    type: 'autoplay-failure',\n                    autoplay: type\n                });\n            });\n        }\n        updateSourceCaches_(srcObj = '') {\n            let src = srcObj;\n            let type = '';\n            if (typeof src !== 'string') {\n                src = srcObj.src;\n                type = srcObj.type;\n            }\n            this.cache_.source = this.cache_.source || {};\n            this.cache_.sources = this.cache_.sources || [];\n            if (src && !type) {\n                type = mimetypes.findMimetype(this, src);\n            }\n            this.cache_.source = mergeOptions({}, srcObj, {\n                src,\n                type\n            });\n            const matchingSources = this.cache_.sources.filter(s => s.src && s.src === src);\n            const sourceElSources = [];\n            const sourceEls = this.$$('source');\n            const matchingSourceEls = [];\n            for (let i = 0; i < sourceEls.length; i++) {\n                const sourceObj = Dom.getAttributes(sourceEls[i]);\n                sourceElSources.push(sourceObj);\n                if (sourceObj.src && sourceObj.src === src) {\n                    matchingSourceEls.push(sourceObj.src);\n                }\n            }\n            if (matchingSourceEls.length && !matchingSources.length) {\n                this.cache_.sources = sourceElSources;\n            } else if (!matchingSources.length) {\n                this.cache_.sources = [this.cache_.source];\n            }\n            this.cache_.src = src;\n        }\n        handleTechSourceset_(event) {\n            if (!this.changingSrc_) {\n                let updateSourceCaches = src => this.updateSourceCaches_(src);\n                const playerSrc = this.currentSource().src;\n                const eventSrc = event.src;\n                if (playerSrc && !/^blob:/.test(playerSrc) && /^blob:/.test(eventSrc)) {\n                    if (!this.lastSource_ || this.lastSource_.tech !== eventSrc && this.lastSource_.player !== playerSrc) {\n                        updateSourceCaches = () => {\n                        };\n                    }\n                }\n                updateSourceCaches(eventSrc);\n                if (!event.src) {\n                    this.tech_.any([\n                        'sourceset',\n                        'loadstart'\n                    ], e => {\n                        if (e.type === 'sourceset') {\n                            return;\n                        }\n                        const techSrc = this.techGet('currentSrc');\n                        this.lastSource_.tech = techSrc;\n                        this.updateSourceCaches_(techSrc);\n                    });\n                }\n            }\n            this.lastSource_ = {\n                player: this.currentSource().src,\n                tech: event.src\n            };\n            this.trigger({\n                src: event.src,\n                type: 'sourceset'\n            });\n        }\n        hasStarted(request) {\n            if (request === undefined) {\n                return this.hasStarted_;\n            }\n            if (request === this.hasStarted_) {\n                return;\n            }\n            this.hasStarted_ = request;\n            if (this.hasStarted_) {\n                this.addClass('vjs-has-started');\n                this.trigger('firstplay');\n            } else {\n                this.removeClass('vjs-has-started');\n            }\n        }\n        handleTechPlay_() {\n            this.removeClass('vjs-ended');\n            this.removeClass('vjs-paused');\n            this.addClass('vjs-playing');\n            this.hasStarted(true);\n            this.trigger('play');\n        }\n        handleTechRateChange_() {\n            if (this.tech_.playbackRate() > 0 && this.cache_.lastPlaybackRate === 0) {\n                this.queuedCallbacks_.forEach(queued => queued.callback(queued.event));\n                this.queuedCallbacks_ = [];\n            }\n            this.cache_.lastPlaybackRate = this.tech_.playbackRate();\n            this.trigger('ratechange');\n        }\n        handleTechWaiting_() {\n            this.addClass('vjs-waiting');\n            this.trigger('waiting');\n            const timeWhenWaiting = this.currentTime();\n            const timeUpdateListener = () => {\n                if (timeWhenWaiting !== this.currentTime()) {\n                    this.removeClass('vjs-waiting');\n                    this.unlistenTo('timeupdate', timeUpdateListener);\n                }\n            };\n            this.listenTo('timeupdate', timeUpdateListener);\n        }\n        handleTechCanPlay_() {\n            this.removeClass('vjs-waiting');\n            this.trigger('canplay');\n        }\n        handleTechCanPlayThrough_() {\n            this.removeClass('vjs-waiting');\n            this.trigger('canplaythrough');\n        }\n        handleTechPlaying_() {\n            this.removeClass('vjs-waiting');\n            this.trigger('playing');\n        }\n        handleTechSeeking_() {\n            this.addClass('vjs-seeking');\n            this.trigger('seeking');\n        }\n        handleTechSeeked_() {\n            this.removeClass('vjs-seeking');\n            this.removeClass('vjs-ended');\n            this.trigger('seeked');\n        }\n        handleTechFirstPlay_() {\n            if (this.options_.starttime) {\n                log.warn('Passing the `starttime` option to the player will be deprecated in 6.0');\n                this.currentTime(this.options_.starttime);\n            }\n            this.addClass('vjs-has-started');\n            this.trigger('firstplay');\n        }\n        handleTechPause_() {\n            this.removeClass('vjs-playing');\n            this.addClass('vjs-paused');\n            this.trigger('pause');\n        }\n        handleTechEnded_() {\n            this.addClass('vjs-ended');\n            if (this.options_.loop) {\n                this.currentTime(0);\n                this.play();\n            } else if (!this.paused()) {\n                this.pause();\n            }\n            this.trigger('ended');\n        }\n        handleTechDurationChange_() {\n            this.duration(this.techGet_('duration'));\n        }\n        handleTechClick_(event) {\n            if (!Dom.isSingleLeftClick(event)) {\n                return;\n            }\n            if (!this.controls_) {\n                return;\n            }\n            if (this.paused()) {\n                promise.silencePromise(this.play());\n            } else {\n                this.pause();\n            }\n        }\n        handleTechDoubleClick_(event) {\n            if (!this.controls_) {\n                return;\n            }\n            const inAllowedEls = Array.prototype.some.call(this.$$('.vjs-control-bar, .vjs-modal-dialog'), el => el.contains(event.target));\n            if (!inAllowedEls) {\n                if (this.options_ === undefined || this.options_.userActions === undefined || this.options_.userActions.doubleClick === undefined || this.options_.userActions.doubleClick !== false) {\n                    if (this.options_ !== undefined && this.options_.userActions !== undefined && typeof this.options_.userActions.doubleClick === 'function') {\n                        this.options_.userActions.doubleClick.call(this, event);\n                    } else if (this.isFullscreen()) {\n                        this.exitFullscreen();\n                    } else {\n                        this.requestFullscreen();\n                    }\n                }\n            }\n        }\n        handleTechTap_() {\n            this.userActive(!this.userActive());\n        }\n        handleTechTouchStart_() {\n            this.userWasActive = this.userActive();\n        }\n        handleTechTouchMove_() {\n            if (this.userWasActive) {\n                this.reportUserActivity();\n            }\n        }\n        handleTechTouchEnd_(event) {\n            if (event.cancelable) {\n                event.preventDefault();\n            }\n        }\n        handleStageClick_() {\n            this.reportUserActivity();\n        }\n        toggleFullscreenClass_() {\n            if (this.isFullscreen()) {\n                this.addClass('vjs-fullscreen');\n            } else {\n                this.removeClass('vjs-fullscreen');\n            }\n        }\n        documentFullscreenChange_(e) {\n            const targetPlayer = e.target.player;\n            if (targetPlayer && targetPlayer !== this) {\n                return;\n            }\n            const el = this.el();\n            let isFs = document[this.fsApi_.fullscreenElement] === el;\n            if (!isFs && el.matches) {\n                isFs = el.matches(':' + this.fsApi_.fullscreen);\n            } else if (!isFs && el.msMatchesSelector) {\n                isFs = el.msMatchesSelector(':' + this.fsApi_.fullscreen);\n            }\n            this.isFullscreen(isFs);\n        }\n        handleTechFullscreenChange_(event, data) {\n            if (data) {\n                if (data.nativeIOSFullscreen) {\n                    this.toggleClass('vjs-ios-native-fs');\n                }\n                this.isFullscreen(data.isFullscreen);\n            }\n        }\n        handleTechFullscreenError_(event, err) {\n            this.trigger('fullscreenerror', err);\n        }\n        togglePictureInPictureClass_() {\n            if (this.isInPictureInPicture()) {\n                this.addClass('vjs-picture-in-picture');\n            } else {\n                this.removeClass('vjs-picture-in-picture');\n            }\n        }\n        handleTechEnterPictureInPicture_(event) {\n            this.isInPictureInPicture(true);\n        }\n        handleTechLeavePictureInPicture_(event) {\n            this.isInPictureInPicture(false);\n        }\n        handleTechError_() {\n            const error = this.tech_.error();\n            this.error(error);\n        }\n        handleTechTextData_() {\n            let data = null;\n            if (arguments.length > 1) {\n                data = arguments[1];\n            }\n            this.trigger('textdata', data);\n        }\n        getCache() {\n            return this.cache_;\n        }\n        resetCache_() {\n            this.cache_ = {\n                currentTime: 0,\n                initTime: 0,\n                inactivityTimeout: this.options_.inactivityTimeout,\n                duration: NaN,\n                lastVolume: 1,\n                lastPlaybackRate: this.defaultPlaybackRate(),\n                media: null,\n                src: '',\n                source: {},\n                sources: [],\n                volume: 1\n            };\n        }\n        techCall_(method, arg) {\n            this.ready(function () {\n                if (method in middleware.allowedSetters) {\n                    return middleware.set(this.middleware_, this.tech_, method, arg);\n                } else if (method in middleware.allowedMediators) {\n                    return middleware.mediate(this.middleware_, this.tech_, method, arg);\n                }\n                try {\n                    if (this.tech_) {\n                        this.tech_[method](arg);\n                    }\n                } catch (e) {\n                    log(e);\n                    throw e;\n                }\n            }, true);\n        }\n        techGet_(method) {\n            if (!this.tech_ || !this.tech_.isReady_) {\n                return;\n            }\n            if (method in middleware.allowedGetters) {\n                return middleware.get(this.middleware_, this.tech_, method);\n            } else if (method in middleware.allowedMediators) {\n                return middleware.mediate(this.middleware_, this.tech_, method);\n            }\n            try {\n                return this.tech_[method]();\n            } catch (e) {\n                if (this.tech_[method] === undefined) {\n                    log(`Video.js: ${ method } method not defined for ${ this.techName_ } playback technology.`, e);\n                    throw e;\n                }\n                if (e.name === 'TypeError') {\n                    log(`Video.js: ${ method } unavailable on ${ this.techName_ } playback technology element.`, e);\n                    this.tech_.isReady_ = false;\n                    throw e;\n                }\n                log(e);\n                throw e;\n            }\n        }\n        play() {\n            const PromiseClass = this.options_.Promise || window.Promise;\n            if (PromiseClass) {\n                return new PromiseClass(resolve => {\n                    this.play_(resolve);\n                });\n            }\n            return this.play_();\n        }\n        play_(callback = promise.silencePromise) {\n            this.playCallbacks_.push(callback);\n            const isSrcReady = Boolean(!this.changingSrc_ && (this.src() || this.currentSrc()));\n            if (this.waitToPlay_) {\n                this.unlistenTo([\n                    'ready',\n                    'loadstart'\n                ], this.waitToPlay_);\n                this.waitToPlay_ = null;\n            }\n            if (!this.isReady_ || !isSrcReady) {\n                this.waitToPlay_ = e => {\n                    this.play_();\n                };\n                this.listenToOnce([\n                    'ready',\n                    'loadstart'\n                ], this.waitToPlay_);\n                if (!isSrcReady && (browser.IS_ANY_SAFARI || browser.IS_IOS)) {\n                    this.load();\n                }\n                return;\n            }\n            const val = this.techGet_('play');\n            if (val === null) {\n                this.runPlayTerminatedQueue_();\n            } else {\n                this.runPlayCallbacks_(val);\n            }\n        }\n        runPlayTerminatedQueue_() {\n            const queue = this.playTerminatedQueue_.slice(0);\n            this.playTerminatedQueue_ = [];\n            queue.forEach(function (q) {\n                q();\n            });\n        }\n        runPlayCallbacks_(val) {\n            const callbacks = this.playCallbacks_.slice(0);\n            this.playCallbacks_ = [];\n            this.playTerminatedQueue_ = [];\n            callbacks.forEach(function (cb) {\n                cb(val);\n            });\n        }\n        pause() {\n            this.techCall_('pause');\n        }\n        paused() {\n            return this.techGet_('paused') === false ? false : true;\n        }\n        played() {\n            return this.techGet_('played') || timeRages.createTimeRange(0, 0);\n        }\n        scrubbing(isScrubbing) {\n            if (typeof isScrubbing === 'undefined') {\n                return this.scrubbing_;\n            }\n            this.scrubbing_ = !!isScrubbing;\n            this.techCall_('setScrubbing', this.scrubbing_);\n            if (isScrubbing) {\n                this.addClass('vjs-scrubbing');\n            } else {\n                this.removeClass('vjs-scrubbing');\n            }\n        }\n        currentTime(seconds) {\n            if (typeof seconds !== 'undefined') {\n                if (seconds < 0) {\n                    seconds = 0;\n                }\n                if (!this.isReady_ || this.changingSrc_ || !this.tech_ || !this.tech_.isReady_) {\n                    this.cache_.initTime = seconds;\n                    this.unlistenTo('canplay', this.applyInitTime_);\n                    this.listenToOnce('canplay', this.applyInitTime_);\n                    return;\n                }\n                this.techCall_('setCurrentTime', seconds);\n                this.cache_.initTime = 0;\n                return;\n            }\n            this.cache_.currentTime = this.techGet_('currentTime') || 0;\n            return this.cache_.currentTime;\n        }\n        applyInitTime_() {\n            this.currentTime(this.cache_.initTime);\n        }\n        duration(seconds) {\n            if (seconds === undefined) {\n                return this.cache_.duration !== undefined ? this.cache_.duration : NaN;\n            }\n            seconds = parseFloat(seconds);\n            if (seconds < 0) {\n                seconds = Infinity;\n            }\n            if (seconds !== this.cache_.duration) {\n                this.cache_.duration = seconds;\n                if (seconds === Infinity) {\n                    this.addClass('vjs-live');\n                } else {\n                    this.removeClass('vjs-live');\n                }\n                if (!isNaN(seconds)) {\n                    this.trigger('durationchange');\n                }\n            }\n        }\n        remainingTime() {\n            return this.duration() - this.currentTime();\n        }\n        remainingTimeDisplay() {\n            return Math.floor(this.duration()) - Math.floor(this.currentTime());\n        }\n        buffered() {\n            let buffered = this.techGet_('buffered');\n            if (!buffered || !buffered.length) {\n                buffered = timeRages.createTimeRange(0, 0);\n            }\n            return buffered;\n        }\n        bufferedPercent() {\n            return buffer.bufferedPercent(this.buffered(), this.duration());\n        }\n        bufferedEnd() {\n            const buffered = this.buffered();\n            const duration = this.duration();\n            let end = buffered.end(buffered.length - 1);\n            if (end > duration) {\n                end = duration;\n            }\n            return end;\n        }\n        volume(percentAsDecimal) {\n            let vol;\n            if (percentAsDecimal !== undefined) {\n                vol = Math.max(0, Math.min(1, parseFloat(percentAsDecimal)));\n                this.cache_.volume = vol;\n                this.techCall_('setVolume', vol);\n                if (vol > 0) {\n                    this.lastVolume_(vol);\n                }\n                return;\n            }\n            vol = parseFloat(this.techGet_('volume'));\n            return isNaN(vol) ? 1 : vol;\n        }\n        muted(muted) {\n            if (muted !== undefined) {\n                this.techCall_('setMuted', muted);\n                return;\n            }\n            return this.techGet_('muted') || false;\n        }\n        defaultMuted(defaultMuted) {\n            if (defaultMuted !== undefined) {\n                return this.techCall_('setDefaultMuted', defaultMuted);\n            }\n            return this.techGet_('defaultMuted') || false;\n        }\n        lastVolume_(percentAsDecimal) {\n            if (percentAsDecimal !== undefined && percentAsDecimal !== 0) {\n                this.cache_.lastVolume = percentAsDecimal;\n                return;\n            }\n            return this.cache_.lastVolume;\n        }\n        supportsFullScreen() {\n            return this.techGet_('supportsFullScreen') || false;\n        }\n        isFullscreen(isFS) {\n            if (isFS !== undefined) {\n                const oldValue = this.isFullscreen_;\n                this.isFullscreen_ = Boolean(isFS);\n                if (this.isFullscreen_ !== oldValue && this.fsApi_.prefixed) {\n                    this.trigger('fullscreenchange');\n                }\n                this.toggleFullscreenClass_();\n                return;\n            }\n            return this.isFullscreen_;\n        }\n        requestFullscreen(fullscreenOptions) {\n            const PromiseClass = this.options_.Promise || window.Promise;\n            if (PromiseClass) {\n                const self = this;\n                return new PromiseClass((resolve, reject) => {\n                    function offHandler() {\n                        self.off('fullscreenerror', errorHandler);\n                        self.off('fullscreenchange', changeHandler);\n                    }\n                    function changeHandler() {\n                        offHandler();\n                        resolve();\n                    }\n                    function errorHandler(e, err) {\n                        offHandler();\n                        reject(err);\n                    }\n                    self.one('fullscreenchange', changeHandler);\n                    self.one('fullscreenerror', errorHandler);\n                    const promise = self.requestFullscreenHelper_(fullscreenOptions);\n                    if (promise) {\n                        promise.then(offHandler, offHandler);\n                        return promise;\n                    }\n                });\n            }\n            return this.requestFullscreenHelper_();\n        }\n        requestFullscreenHelper_(fullscreenOptions) {\n            let fsOptions;\n            if (!this.fsApi_.prefixed) {\n                fsOptions = this.options_.fullscreen && this.options_.fullscreen.options || {};\n                if (fullscreenOptions !== undefined) {\n                    fsOptions = fullscreenOptions;\n                }\n            }\n            if (this.fsApi_.requestFullscreen) {\n                const promise = this.el_[this.fsApi_.requestFullscreen](fsOptions);\n                if (promise) {\n                    promise.then(() => this.isFullscreen(true), () => this.isFullscreen(false));\n                }\n                return promise;\n            } else if (this.tech_.supportsFullScreen()) {\n                this.techCall_('enterFullScreen');\n            } else {\n                this.enterFullWindow();\n            }\n        }\n        exitFullscreen() {\n            const PromiseClass = this.options_.Promise || window.Promise;\n            if (PromiseClass) {\n                const self = this;\n                return new PromiseClass((resolve, reject) => {\n                    function offHandler() {\n                        self.off('fullscreenerror', errorHandler);\n                        self.off('fullscreenchange', changeHandler);\n                    }\n                    function changeHandler() {\n                        offHandler();\n                        resolve();\n                    }\n                    function errorHandler(e, err) {\n                        offHandler();\n                        reject(err);\n                    }\n                    self.one('fullscreenchange', changeHandler);\n                    self.one('fullscreenerror', errorHandler);\n                    const promise = self.exitFullscreenHelper_();\n                    if (promise) {\n                        promise.then(offHandler, offHandler);\n                        return promise;\n                    }\n                });\n            }\n            return this.exitFullscreenHelper_();\n        }\n        exitFullscreenHelper_() {\n            if (this.fsApi_.requestFullscreen) {\n                const promise = document[this.fsApi_.exitFullscreen]();\n                if (promise) {\n                    promise.then(() => this.isFullscreen(false));\n                }\n                return promise;\n            } else if (this.tech_.supportsFullScreen()) {\n                this.techCall_('exitFullScreen');\n            } else {\n                this.exitFullWindow();\n            }\n        }\n        enterFullWindow() {\n            this.isFullscreen(true);\n            this.isFullWindow = true;\n            this.docOrigOverflow = document.documentElement.style.overflow;\n            Events.on(document, 'keydown', this.boundFullWindowOnEscKey_);\n            document.documentElement.style.overflow = 'hidden';\n            Dom.addClass(document.body, 'vjs-full-window');\n            this.trigger('enterFullWindow');\n        }\n        fullWindowOnEscKey(event) {\n            if (keycode.isEventKey(event, 'Esc')) {\n                if (this.isFullscreen() === true) {\n                    this.exitFullscreen();\n                } else {\n                    this.exitFullWindow();\n                }\n            }\n        }\n        exitFullWindow() {\n            this.isFullscreen(false);\n            this.isFullWindow = false;\n            Events.off(document, 'keydown', this.boundFullWindowOnEscKey_);\n            document.documentElement.style.overflow = this.docOrigOverflow;\n            Dom.removeClass(document.body, 'vjs-full-window');\n            this.trigger('exitFullWindow');\n        }\n        disablePictureInPicture(value) {\n            if (value === undefined) {\n                return this.techGet_('disablePictureInPicture');\n            }\n            this.techCall_('setDisablePictureInPicture', value);\n            this.options_.disablePictureInPicture = value;\n            this.trigger('disablepictureinpicturechanged');\n        }\n        isInPictureInPicture(isPiP) {\n            if (isPiP !== undefined) {\n                this.isInPictureInPicture_ = !!isPiP;\n                this.togglePictureInPictureClass_();\n                return;\n            }\n            return !!this.isInPictureInPicture_;\n        }\n        requestPictureInPicture() {\n            if ('pictureInPictureEnabled' in document && this.disablePictureInPicture() === false) {\n                return this.techGet_('requestPictureInPicture');\n            }\n        }\n        exitPictureInPicture() {\n            if ('pictureInPictureEnabled' in document) {\n                return document.exitPictureInPicture();\n            }\n        }\n        handleKeyDown(event) {\n            const {userActions} = this.options_;\n            if (!userActions || !userActions.hotkeys) {\n                return;\n            }\n            const excludeElement = el => {\n                const tagName = el.tagName.toLowerCase();\n                if (el.isContentEditable) {\n                    return true;\n                }\n                const allowedInputTypes = [\n                    'button',\n                    'checkbox',\n                    'hidden',\n                    'radio',\n                    'reset',\n                    'submit'\n                ];\n                if (tagName === 'input') {\n                    return allowedInputTypes.indexOf(el.type) === -1;\n                }\n                const excludedTags = ['textarea'];\n                return excludedTags.indexOf(tagName) !== -1;\n            };\n            if (excludeElement(this.el_.ownerDocument.activeElement)) {\n                return;\n            }\n            if (typeof userActions.hotkeys === 'function') {\n                userActions.hotkeys.call(this, event);\n            } else {\n                this.handleHotkeys(event);\n            }\n        }\n        handleHotkeys(event) {\n            const hotkeys = this.options_.userActions ? this.options_.userActions.hotkeys : {};\n            const {fullscreenKey = keydownEvent => keycode.isEventKey(keydownEvent, 'f'), muteKey = keydownEvent => keycode.isEventKey(keydownEvent, 'm'), playPauseKey = keydownEvent => keycode.isEventKey(keydownEvent, 'k') || keycode.isEventKey(keydownEvent, 'Space')} = hotkeys;\n            if (fullscreenKey.call(this, event)) {\n                event.preventDefault();\n                event.stopPropagation();\n                const FSToggle = Component.getComponent('FullscreenToggle');\n                if (document[this.fsApi_.fullscreenEnabled] !== false) {\n                    FSToggle.prototype.handleClick.call(this, event);\n                }\n            } else if (muteKey.call(this, event)) {\n                event.preventDefault();\n                event.stopPropagation();\n                const MuteToggle = Component.getComponent('MuteToggle');\n                MuteToggle.prototype.handleClick.call(this, event);\n            } else if (playPauseKey.call(this, event)) {\n                event.preventDefault();\n                event.stopPropagation();\n                const PlayToggle = Component.getComponent('PlayToggle');\n                PlayToggle.prototype.handleClick.call(this, event);\n            }\n        }\n        canPlayType(type) {\n            let can;\n            for (let i = 0, j = this.options_.techOrder; i < j.length; i++) {\n                const techName = j[i];\n                let tech = Tech.getTech(techName);\n                if (!tech) {\n                    tech = Component.getComponent(techName);\n                }\n                if (!tech) {\n                    log.error(`The \"${ techName }\" tech is undefined. Skipped browser support check for that tech.`);\n                    continue;\n                }\n                if (tech.isSupported()) {\n                    can = tech.canPlayType(type);\n                    if (can) {\n                        return can;\n                    }\n                }\n            }\n            return '';\n        }\n        selectSource(sources) {\n            const techs = this.options_.techOrder.map(techName => {\n                return [\n                    techName,\n                    Tech.getTech(techName)\n                ];\n            }).filter(([techName, tech]) => {\n                if (tech) {\n                    return tech.isSupported();\n                }\n                log.error(`The \"${ techName }\" tech is undefined. Skipped browser support check for that tech.`);\n                return false;\n            });\n            const findFirstPassingTechSourcePair = function (outerArray, innerArray, tester) {\n                let found;\n                outerArray.some(outerChoice => {\n                    return innerArray.some(innerChoice => {\n                        found = tester(outerChoice, innerChoice);\n                        if (found) {\n                            return true;\n                        }\n                    });\n                });\n                return found;\n            };\n            let foundSourceAndTech;\n            const flip = fn => (a, b) => fn(b, a);\n            const finder = ([techName, tech], source) => {\n                if (tech.canPlaySource(source, this.options_[techName.toLowerCase()])) {\n                    return {\n                        source,\n                        tech: techName\n                    };\n                }\n            };\n            if (this.options_.sourceOrder) {\n                foundSourceAndTech = findFirstPassingTechSourcePair(sources, techs, flip(finder));\n            } else {\n                foundSourceAndTech = findFirstPassingTechSourcePair(techs, sources, finder);\n            }\n            return foundSourceAndTech || false;\n        }\n        src(source) {\n            if (typeof source === 'undefined') {\n                return this.cache_.src || '';\n            }\n            const sources = filterSource(source);\n            if (!sources.length) {\n                this.setTimeout(function () {\n                    this.error({\n                        code: 4,\n                        message: this.localize(this.options_.notSupportedMessage)\n                    });\n                }, 0);\n                return;\n            }\n            this.changingSrc_ = true;\n            this.cache_.sources = sources;\n            this.updateSourceCaches_(sources[0]);\n            middleware.setSource(this, sources[0], (middlewareSource, mws) => {\n                this.middleware_ = mws;\n                this.cache_.sources = sources;\n                this.updateSourceCaches_(middlewareSource);\n                const err = this.src_(middlewareSource);\n                if (err) {\n                    if (sources.length > 1) {\n                        return this.src(sources.slice(1));\n                    }\n                    this.changingSrc_ = false;\n                    this.setTimeout(function () {\n                        this.error({\n                            code: 4,\n                            message: this.localize(this.options_.notSupportedMessage)\n                        });\n                    }, 0);\n                    this.triggerReady();\n                    return;\n                }\n                middleware.setTech(mws, this.tech_);\n            });\n        }\n        src_(source) {\n            const sourceTech = this.selectSource([source]);\n            if (!sourceTech) {\n                return true;\n            }\n            if (!stringCases.titleCaseEquals(sourceTech.tech, this.techName_)) {\n                this.changingSrc_ = true;\n                this.loadTech_(sourceTech.tech, sourceTech.source);\n                this.tech_.ready(() => {\n                    this.changingSrc_ = false;\n                });\n                return false;\n            }\n            this.ready(function () {\n                if (this.tech_.constructor.prototype.hasOwnProperty('setSource')) {\n                    this.techCall_('setSource', source);\n                } else {\n                    this.techCall_('src', source.src);\n                }\n                this.changingSrc_ = false;\n            }, true);\n            return false;\n        }\n        load() {\n            this.techCall_('load');\n        }\n        reset() {\n            const PromiseClass = this.options_.Promise || window.Promise;\n            if (this.paused() || !PromiseClass) {\n                this.doReset_();\n            } else {\n                const playPromise = this.play();\n                promise.silencePromise(playPromise.then(() => this.doReset_()));\n            }\n        }\n        doReset_() {\n            if (this.tech_) {\n                this.tech_.clearTracks('text');\n            }\n            this.resetCache_();\n            this.poster('');\n            this.loadTech_(this.options_.techOrder[0], null);\n            this.techCall_('reset');\n            this.resetControlBarUI_();\n            if (evented.isEvented(this)) {\n                this.trigger('playerreset');\n            }\n        }\n        resetControlBarUI_() {\n            this.resetProgressBar_();\n            this.resetPlaybackRate_();\n            this.resetVolumeBar_();\n        }\n        resetProgressBar_() {\n            this.currentTime(0);\n            const {durationDisplay, remainingTimeDisplay} = this.controlBar;\n            if (durationDisplay) {\n                durationDisplay.updateContent();\n            }\n            if (remainingTimeDisplay) {\n                remainingTimeDisplay.updateContent();\n            }\n        }\n        resetPlaybackRate_() {\n            this.playbackRate(this.defaultPlaybackRate());\n            this.handleTechRateChange_();\n        }\n        resetVolumeBar_() {\n            this.volume(1);\n            this.trigger('volumechange');\n        }\n        currentSources() {\n            const source = this.currentSource();\n            const sources = [];\n            if (Object.keys(source).length !== 0) {\n                sources.push(source);\n            }\n            return this.cache_.sources || sources;\n        }\n        currentSource() {\n            return this.cache_.source || {};\n        }\n        currentSrc() {\n            return this.currentSource() && this.currentSource().src || '';\n        }\n        currentType() {\n            return this.currentSource() && this.currentSource().type || '';\n        }\n        preload(value) {\n            if (value !== undefined) {\n                this.techCall_('setPreload', value);\n                this.options_.preload = value;\n                return;\n            }\n            return this.techGet_('preload');\n        }\n        autoplay(value) {\n            if (value === undefined) {\n                return this.options_.autoplay || false;\n            }\n            let techAutoplay;\n            if (typeof value === 'string' && /(any|play|muted)/.test(value)) {\n                this.options_.autoplay = value;\n                this.manualAutoplay_(value);\n                techAutoplay = false;\n            } else if (!value) {\n                this.options_.autoplay = false;\n            } else {\n                this.options_.autoplay = true;\n            }\n            techAutoplay = typeof techAutoplay === 'undefined' ? this.options_.autoplay : techAutoplay;\n            if (this.tech_) {\n                this.techCall_('setAutoplay', techAutoplay);\n            }\n        }\n        playsinline(value) {\n            if (value !== undefined) {\n                this.techCall_('setPlaysinline', value);\n                this.options_.playsinline = value;\n                return this;\n            }\n            return this.techGet_('playsinline');\n        }\n        loop(value) {\n            if (value !== undefined) {\n                this.techCall_('setLoop', value);\n                this.options_.loop = value;\n                return;\n            }\n            return this.techGet_('loop');\n        }\n        poster(src) {\n            if (src === undefined) {\n                return this.poster_;\n            }\n            if (!src) {\n                src = '';\n            }\n            if (src === this.poster_) {\n                return;\n            }\n            this.poster_ = src;\n            this.techCall_('setPoster', src);\n            this.isPosterFromTech_ = false;\n            this.trigger('posterchange');\n        }\n        handleTechPosterChange_() {\n            if ((!this.poster_ || this.options_.techCanOverridePoster) && this.tech_ && this.tech_.poster) {\n                const newPoster = this.tech_.poster() || '';\n                if (newPoster !== this.poster_) {\n                    this.poster_ = newPoster;\n                    this.isPosterFromTech_ = true;\n                    this.trigger('posterchange');\n                }\n            }\n        }\n        controls(bool) {\n            if (bool === undefined) {\n                return !!this.controls_;\n            }\n            bool = !!bool;\n            if (this.controls_ === bool) {\n                return;\n            }\n            this.controls_ = bool;\n            if (this.usingNativeControls()) {\n                this.techCall_('setControls', bool);\n            }\n            if (this.controls_) {\n                this.removeClass('vjs-controls-disabled');\n                this.addClass('vjs-controls-enabled');\n                this.trigger('controlsenabled');\n                if (!this.usingNativeControls()) {\n                    this.addTechControlsListeners_();\n                }\n            } else {\n                this.removeClass('vjs-controls-enabled');\n                this.addClass('vjs-controls-disabled');\n                this.trigger('controlsdisabled');\n                if (!this.usingNativeControls()) {\n                    this.removeTechControlsListeners_();\n                }\n            }\n        }\n        usingNativeControls(bool) {\n            if (bool === undefined) {\n                return !!this.usingNativeControls_;\n            }\n            bool = !!bool;\n            if (this.usingNativeControls_ === bool) {\n                return;\n            }\n            this.usingNativeControls_ = bool;\n            if (this.usingNativeControls_) {\n                this.addClass('vjs-using-native-controls');\n                this.trigger('usingnativecontrols');\n            } else {\n                this.removeClass('vjs-using-native-controls');\n                this.trigger('usingcustomcontrols');\n            }\n        }\n        error(err) {\n            if (err === undefined) {\n                return this.error_ || null;\n            }\n            if (this.options_.suppressNotSupportedError && err && err.code === 4) {\n                const triggerSuppressedError = function () {\n                    this.error(err);\n                };\n                this.options_.suppressNotSupportedError = false;\n                this.any([\n                    'click',\n                    'touchstart'\n                ], triggerSuppressedError);\n                this.listenToOnce('loadstart', function () {\n                    this.unlistenTo([\n                        'click',\n                        'touchstart'\n                    ], triggerSuppressedError);\n                });\n                return;\n            }\n            if (err === null) {\n                this.error_ = err;\n                this.removeClass('vjs-error');\n                if (this.errorDisplay) {\n                    this.errorDisplay.close();\n                }\n                return;\n            }\n            this.error_ = new MediaError(err);\n            this.addClass('vjs-error');\n            log.error(`(CODE:${ this.error_.code } ${ MediaError.errorTypes[this.error_.code] })`, this.error_.message, this.error_);\n            this.trigger('error');\n            return;\n        }\n        reportUserActivity(event) {\n            this.userActivity_ = true;\n        }\n        userActive(bool) {\n            if (bool === undefined) {\n                return this.userActive_;\n            }\n            bool = !!bool;\n            if (bool === this.userActive_) {\n                return;\n            }\n            this.userActive_ = bool;\n            if (this.userActive_) {\n                this.userActivity_ = true;\n                this.removeClass('vjs-user-inactive');\n                this.addClass('vjs-user-active');\n                this.trigger('useractive');\n                return;\n            }\n            if (this.tech_) {\n                this.tech_.one('mousemove', function (e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                });\n            }\n            this.userActivity_ = false;\n            this.removeClass('vjs-user-active');\n            this.addClass('vjs-user-inactive');\n            this.trigger('userinactive');\n        }\n        listenForUserActivity_() {\n            let mouseInProgress;\n            let lastMoveX;\n            let lastMoveY;\n            const handleActivity = Fn.bind(this, this.reportUserActivity);\n            const handleMouseMove = function (e) {\n                if (e.screenX !== lastMoveX || e.screenY !== lastMoveY) {\n                    lastMoveX = e.screenX;\n                    lastMoveY = e.screenY;\n                    handleActivity();\n                }\n            };\n            const handleMouseDown = function () {\n                handleActivity();\n                this.clearInterval(mouseInProgress);\n                mouseInProgress = this.setInterval(handleActivity, 250);\n            };\n            const handleMouseUpAndMouseLeave = function (event) {\n                handleActivity();\n                this.clearInterval(mouseInProgress);\n            };\n            this.listenTo('mousedown', handleMouseDown);\n            this.listenTo('mousemove', handleMouseMove);\n            this.listenTo('mouseup', handleMouseUpAndMouseLeave);\n            this.listenTo('mouseleave', handleMouseUpAndMouseLeave);\n            const controlBar = this.getChild('controlBar');\n            if (controlBar && !browser.IS_IOS && !browser.IS_ANDROID) {\n                controlBar.on('mouseenter', function (event) {\n                    this.player().cache_.inactivityTimeout = this.player().options_.inactivityTimeout;\n                    this.player().options_.inactivityTimeout = 0;\n                });\n                controlBar.on('mouseleave', function (event) {\n                    this.player().options_.inactivityTimeout = this.player().cache_.inactivityTimeout;\n                });\n            }\n            this.listenTo('keydown', handleActivity);\n            this.listenTo('keyup', handleActivity);\n            let inactivityTimeout;\n            this.setInterval(function () {\n                if (!this.userActivity_) {\n                    return;\n                }\n                this.userActivity_ = false;\n                this.userActive(true);\n                this.clearTimeout(inactivityTimeout);\n                const timeout = this.options_.inactivityTimeout;\n                if (timeout <= 0) {\n                    return;\n                }\n                inactivityTimeout = this.setTimeout(function () {\n                    if (!this.userActivity_) {\n                        this.userActive(false);\n                    }\n                }, timeout);\n            }, 250);\n        }\n        playbackRate(rate) {\n            if (rate !== undefined) {\n                this.techCall_('setPlaybackRate', rate);\n                return;\n            }\n            if (this.tech_ && this.tech_.featuresPlaybackRate) {\n                return this.cache_.lastPlaybackRate || this.techGet_('playbackRate');\n            }\n            return 1;\n        }\n        defaultPlaybackRate(rate) {\n            if (rate !== undefined) {\n                return this.techCall_('setDefaultPlaybackRate', rate);\n            }\n            if (this.tech_ && this.tech_.featuresPlaybackRate) {\n                return this.techGet_('defaultPlaybackRate');\n            }\n            return 1;\n        }\n        isAudio(bool) {\n            if (bool !== undefined) {\n                this.isAudio_ = !!bool;\n                return;\n            }\n            return !!this.isAudio_;\n        }\n        addTextTrack(kind, label, language) {\n            if (this.tech_) {\n                return this.tech_.addTextTrack(kind, label, language);\n            }\n        }\n        addRemoteTextTrack(options, manualCleanup) {\n            if (this.tech_) {\n                return this.tech_.addRemoteTextTrack(options, manualCleanup);\n            }\n        }\n        removeRemoteTextTrack(obj = {}) {\n            let {track} = obj;\n            if (!track) {\n                track = obj;\n            }\n            if (this.tech_) {\n                return this.tech_.removeRemoteTextTrack(track);\n            }\n        }\n        getVideoPlaybackQuality() {\n            return this.techGet_('getVideoPlaybackQuality');\n        }\n        videoWidth() {\n            return this.tech_ && this.tech_.videoWidth && this.tech_.videoWidth() || 0;\n        }\n        videoHeight() {\n            return this.tech_ && this.tech_.videoHeight && this.tech_.videoHeight() || 0;\n        }\n        language(code) {\n            if (code === undefined) {\n                return this.language_;\n            }\n            if (this.language_ !== String(code).toLowerCase()) {\n                this.language_ = String(code).toLowerCase();\n                if (evented.isEvented(this)) {\n                    this.trigger('languagechange');\n                }\n            }\n        }\n        languages() {\n            return mergeOptions(Player.prototype.options_.languages, this.languages_);\n        }\n        toJSON() {\n            const options = mergeOptions(this.options_);\n            const tracks = options.tracks;\n            options.tracks = [];\n            for (let i = 0; i < tracks.length; i++) {\n                let track = tracks[i];\n                track = mergeOptions(track);\n                track.player = undefined;\n                options.tracks[i] = track;\n            }\n            return options;\n        }\n        createModal(content, options) {\n            options = options || {};\n            options.content = content || '';\n            const modal = new ModalDialog(this, options);\n            this.addChild(modal);\n            modal.on('dispose', () => {\n                this.removeChild(modal);\n            });\n            modal.open();\n            return modal;\n        }\n        updateCurrentBreakpoint_() {\n            if (!this.responsive()) {\n                return;\n            }\n            const currentBreakpoint = this.currentBreakpoint();\n            const currentWidth = this.currentWidth();\n            for (let i = 0; i < BREAKPOINT_ORDER.length; i++) {\n                const candidateBreakpoint = BREAKPOINT_ORDER[i];\n                const maxWidth = this.breakpoints_[candidateBreakpoint];\n                if (currentWidth <= maxWidth) {\n                    if (currentBreakpoint === candidateBreakpoint) {\n                        return;\n                    }\n                    if (currentBreakpoint) {\n                        this.removeClass(BREAKPOINT_CLASSES[currentBreakpoint]);\n                    }\n                    this.addClass(BREAKPOINT_CLASSES[candidateBreakpoint]);\n                    this.breakpoint_ = candidateBreakpoint;\n                    break;\n                }\n            }\n        }\n        removeCurrentBreakpoint_() {\n            const className = this.currentBreakpointClass();\n            this.breakpoint_ = '';\n            if (className) {\n                this.removeClass(className);\n            }\n        }\n        breakpoints(breakpoints) {\n            if (breakpoints === undefined) {\n                return obj.assign(this.breakpoints_);\n            }\n            this.breakpoint_ = '';\n            this.breakpoints_ = obj.assign({}, DEFAULT_BREAKPOINTS, breakpoints);\n            this.updateCurrentBreakpoint_();\n            return obj.assign(this.breakpoints_);\n        }\n        responsive(value) {\n            if (value === undefined) {\n                return this.responsive_;\n            }\n            value = Boolean(value);\n            const current = this.responsive_;\n            if (value === current) {\n                return;\n            }\n            this.responsive_ = value;\n            if (value) {\n                this.listenTo('playerresize', this.updateCurrentBreakpoint_);\n                this.updateCurrentBreakpoint_();\n            } else {\n                this.unlistenTo('playerresize', this.updateCurrentBreakpoint_);\n                this.removeCurrentBreakpoint_();\n            }\n            return value;\n        }\n        currentBreakpoint() {\n            return this.breakpoint_;\n        }\n        currentBreakpointClass() {\n            return BREAKPOINT_CLASSES[this.breakpoint_] || '';\n        }\n        loadMedia(media, ready) {\n            if (!media || typeof media !== 'object') {\n                return;\n            }\n            this.reset();\n            this.cache_.media = mergeOptions(media);\n            const {artwork, poster, src, textTracks} = this.cache_.media;\n            if (!artwork && poster) {\n                this.cache_.media.artwork = [{\n                        src: poster,\n                        type: mimetypes.getMimetype(poster)\n                    }];\n            }\n            if (src) {\n                this.src(src);\n            }\n            if (poster) {\n                this.poster(poster);\n            }\n            if (Array.isArray(textTracks)) {\n                textTracks.forEach(tt => this.addRemoteTextTrack(tt, false));\n            }\n            this.ready(ready);\n        }\n        getMedia() {\n            if (!this.cache_.media) {\n                const poster = this.poster();\n                const src = this.currentSources();\n                const textTracks = Array.prototype.map.call(this.remoteTextTracks(), tt => ({\n                    kind: tt.kind,\n                    label: tt.label,\n                    language: tt.language,\n                    src: tt.src\n                }));\n                const media = {\n                    src,\n                    textTracks\n                };\n                if (poster) {\n                    media.poster = poster;\n                    media.artwork = [{\n                            src: media.poster,\n                            type: mimetypes.getMimetype(media.poster)\n                        }];\n                }\n                return media;\n            }\n            return mergeOptions(this.cache_.media);\n        }\n        static getTagSettings(tag) {\n            const baseOptions = {\n                sources: [],\n                tracks: []\n            };\n            const tagOptions = Dom.getAttributes(tag);\n            const dataSetup = tagOptions['data-setup'];\n            if (Dom.hasClass(tag, 'vjs-fill')) {\n                tagOptions.fill = true;\n            }\n            if (Dom.hasClass(tag, 'vjs-fluid')) {\n                tagOptions.fluid = true;\n            }\n            if (dataSetup !== null) {\n                const [err, data] = safeParseTuple(dataSetup || '{}');\n                if (err) {\n                    log.error(err);\n                }\n                obj.assign(tagOptions, data);\n            }\n            obj.assign(baseOptions, tagOptions);\n            if (tag.hasChildNodes()) {\n                const children = tag.childNodes;\n                for (let i = 0, j = children.length; i < j; i++) {\n                    const child = children[i];\n                    const childName = child.nodeName.toLowerCase();\n                    if (childName === 'source') {\n                        baseOptions.sources.push(Dom.getAttributes(child));\n                    } else if (childName === 'track') {\n                        baseOptions.tracks.push(Dom.getAttributes(child));\n                    }\n                }\n            }\n            return baseOptions;\n        }\n        flexNotSupported_() {\n            const elem = document.createElement('i');\n            return !('flexBasis' in elem.style || 'webkitFlexBasis' in elem.style || 'mozFlexBasis' in elem.style || 'msFlexBasis' in elem.style || 'msFlexOrder' in elem.style);\n        }\n        debug(enabled) {\n            if (enabled === undefined) {\n                return this.debugEnabled_;\n            }\n            if (enabled) {\n                this.trigger('debugon');\n                this.previousLogLevel_ = this.log.level;\n                this.log.level('debug');\n                this.debugEnabled_ = true;\n            } else {\n                this.trigger('debugoff');\n                this.log.level(this.previousLogLevel_);\n                this.previousLogLevel_ = undefined;\n                this.debugEnabled_ = false;\n            }\n        }\n    }\n    TRACK_TYPES.ALL.names.forEach(function (name) {\n        const props = TRACK_TYPES.ALL[name];\n        Player.prototype[props.getterName] = function () {\n            if (this.tech_) {\n                return this.tech_[props.getterName]();\n            }\n            this[props.privateName] = this[props.privateName] || new props.ListClass();\n            return this[props.privateName];\n        };\n    });\n    Player.prototype.crossorigin = Player.prototype.crossOrigin;\n    Player.players = {};\n    const navigator = window.navigator;\n    Player.prototype.options_ = {\n        techOrder: Tech.defaultTechOrder_,\n        html5: {},\n        inactivityTimeout: 2000,\n        playbackRates: [],\n        liveui: false,\n        children: [\n            'mediaLoader',\n            'posterImage',\n            'textTrackDisplay',\n            'loadingSpinner',\n            'bigPlayButton',\n            'liveTracker',\n            'controlBar',\n            'errorDisplay',\n            'textTrackSettings',\n            'resizeManager'\n        ],\n        language: navigator && (navigator.languages && navigator.languages[0] || navigator.userLanguage || navigator.language) || 'en',\n        languages: {},\n        notSupportedMessage: 'No compatible source was found for this media.',\n        fullscreen: { options: { navigationUI: 'hide' } },\n        breakpoints: {},\n        responsive: false\n    };\n    [\n        'ended',\n        'seeking',\n        'seekable',\n        'networkState',\n        'readyState'\n    ].forEach(function (fn) {\n        Player.prototype[fn] = function () {\n            return this.techGet_(fn);\n        };\n    });\n    TECH_EVENTS_RETRIGGER.forEach(function (event) {\n        Player.prototype[`handleTech${ stringCases.toTitleCase(event) }_`] = function () {\n            return this.trigger(event);\n        };\n    });\n    Component.registerComponent('Player', Player);\n    return Player;\n});"]}