{"version":3,"sources":["control-bar/playback-rate-menu/playback-rate-menu-button.js"],"names":["define","MenuButton","Menu","PlaybackRateMenuItem","Component","Dom","PlaybackRateMenuButton","[object Object]","player","options","super","this","updateVisibility","updateLabel","listenTo","el","createEl","labelEl_","className","innerHTML","appendChild","dispose","buildCSSClass","buildWrapperCSSClass","menu","rates","playbackRates","i","length","addChild","rate","setAttribute","playbackRate","event","currentRate","newRate","options_","playerOptions","tech_","featuresPlaybackRate","playbackRateSupported","removeClass","addClass","prototype","controlText_","registerComponent"],"mappings":";;;;;;;AAAAA,QACI,yBACA,kBACA,4BACA,kBACA,mBACD,SAAUC,EAAYC,EAAMC,EAAsBC,EAAWC,GAC5D,mBACMC,UAA+BL,EACjCM,YAAYC,EAAQC,GAChBC,MAAMF,EAAQC,GACdE,KAAKC,mBACLD,KAAKE,cACLF,KAAKG,SAASN,EAAQ,YAAaG,KAAKC,kBACxCD,KAAKG,SAASN,EAAQ,aAAcG,KAAKE,aAE7CN,WACI,MAAMQ,EAAKL,MAAMM,WAMjB,OALAL,KAAKM,SAAWZ,EAAIW,SAAS,OACzBE,UAAW,0BACXC,UAAW,OAEfJ,EAAGK,YAAYT,KAAKM,UACbF,EAEXR,UACII,KAAKM,SAAW,KAChBP,MAAMW,UAEVd,gBACI,2BAA6BG,MAAMY,kBAEvCf,uBACI,2BAA6BG,MAAMa,yBAEvChB,aACI,MAAMiB,EAAO,IAAItB,EAAKS,KAAKH,UACrBiB,EAAQd,KAAKe,gBACnB,GAAID,EACA,IAAK,IAAIE,EAAIF,EAAMG,OAAS,EAAGD,GAAK,EAAGA,IACnCH,EAAKK,SAAS,IAAI1B,EAAqBQ,KAAKH,UAAYsB,KAAML,EAAME,GAAK,OAGjF,OAAOH,EAEXjB,uBACII,KAAKI,KAAKgB,aAAa,gBAAiBpB,KAAKH,SAASwB,gBAE1DzB,YAAY0B,GACR,MAAMC,EAAcvB,KAAKH,SAASwB,eAC5BP,EAAQd,KAAKe,gBACnB,IAAIS,EAAUV,EAAM,GACpB,IAAK,IAAIE,EAAI,EAAGA,EAAIF,EAAMG,OAAQD,IAC9B,GAAIF,EAAME,GAAKO,EAAa,CACxBC,EAAUV,EAAME,GAChB,MAGRhB,KAAKH,SAASwB,aAAaG,GAE/B5B,gBACI,OAAOI,KAAKyB,SAASV,eAAiBf,KAAKyB,SAASC,eAAiB1B,KAAKyB,SAASC,cAAcX,cAErGnB,wBACI,OAAOI,KAAKH,SAAS8B,OAAS3B,KAAKH,SAAS8B,MAAMC,sBAAwB5B,KAAKe,iBAAmBf,KAAKe,gBAAgBE,OAAS,EAEpIrB,iBAAiB0B,GACTtB,KAAK6B,wBACL7B,KAAK8B,YAAY,cAEjB9B,KAAK+B,SAAS,cAGtBnC,YAAY0B,GACJtB,KAAK6B,0BACL7B,KAAKM,SAASE,UAAYR,KAAKH,SAASwB,eAAiB,MAMrE,OAFA1B,EAAuBqC,UAAUC,aAAe,gBAChDxC,EAAUyC,kBAAkB,yBAA0BvC,GAC/CA","file":"../../../control-bar/playback-rate-menu/playback-rate-menu-button.js","sourcesContent":["define([\n    '../../menu/menu-button',\n    '../../menu/menu',\n    './playback-rate-menu-item',\n    '../../component',\n    '../../utils/dom'\n], function (MenuButton, Menu, PlaybackRateMenuItem, Component, Dom) {\n    'use strict';\n    class PlaybackRateMenuButton extends MenuButton {\n        constructor(player, options) {\n            super(player, options);\n            this.updateVisibility();\n            this.updateLabel();\n            this.listenTo(player, 'loadstart', this.updateVisibility);\n            this.listenTo(player, 'ratechange', this.updateLabel);\n        }\n        createEl() {\n            const el = super.createEl();\n            this.labelEl_ = Dom.createEl('div', {\n                className: 'vjs-playback-rate-value',\n                innerHTML: '1x'\n            });\n            el.appendChild(this.labelEl_);\n            return el;\n        }\n        dispose() {\n            this.labelEl_ = null;\n            super.dispose();\n        }\n        buildCSSClass() {\n            return `vjs-playback-rate ${ super.buildCSSClass() }`;\n        }\n        buildWrapperCSSClass() {\n            return `vjs-playback-rate ${ super.buildWrapperCSSClass() }`;\n        }\n        createMenu() {\n            const menu = new Menu(this.player());\n            const rates = this.playbackRates();\n            if (rates) {\n                for (let i = rates.length - 1; i >= 0; i--) {\n                    menu.addChild(new PlaybackRateMenuItem(this.player(), { rate: rates[i] + 'x' }));\n                }\n            }\n            return menu;\n        }\n        updateARIAAttributes() {\n            this.el().setAttribute('aria-valuenow', this.player().playbackRate());\n        }\n        handleClick(event) {\n            const currentRate = this.player().playbackRate();\n            const rates = this.playbackRates();\n            let newRate = rates[0];\n            for (let i = 0; i < rates.length; i++) {\n                if (rates[i] > currentRate) {\n                    newRate = rates[i];\n                    break;\n                }\n            }\n            this.player().playbackRate(newRate);\n        }\n        playbackRates() {\n            return this.options_.playbackRates || this.options_.playerOptions && this.options_.playerOptions.playbackRates;\n        }\n        playbackRateSupported() {\n            return this.player().tech_ && this.player().tech_.featuresPlaybackRate && this.playbackRates() && this.playbackRates().length > 0;\n        }\n        updateVisibility(event) {\n            if (this.playbackRateSupported()) {\n                this.removeClass('vjs-hidden');\n            } else {\n                this.addClass('vjs-hidden');\n            }\n        }\n        updateLabel(event) {\n            if (this.playbackRateSupported()) {\n                this.labelEl_.innerHTML = this.player().playbackRate() + 'x';\n            }\n        }\n    }\n    PlaybackRateMenuButton.prototype.controlText_ = 'Playback Rate';\n    Component.registerComponent('PlaybackRateMenuButton', PlaybackRateMenuButton);\n    return PlaybackRateMenuButton;\n});"]}