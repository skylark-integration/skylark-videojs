{"version":3,"sources":["control-bar/progress-control/progress-control.js"],"names":["define","Component","Dom","clamp","Fn","ProgressControl","[object Object]","player","options","super","this","handleMouseMove","throttle","bind","UPDATE_REFRESH_INTERVAL","throttledHandleMouseSeek","handleMouseSeek","enable","createEl","className","event","seekBar","getChild","playProgressBar","mouseTimeDisplay","seekBarEl","el","seekBarRect","findPosition","seekBarPoint","getPointerPosition","x","update","getProgress","enabled_","children","forEach","child","disable","enabled","off","handleMouseDown","el_","handleMouseUp","addClass","on","removeClass","doc","ownerDocument","prototype","options_","registerComponent"],"mappings":";;;;;;;AAAAA,QACI,kBACA,kBACA,oBACA,iBACA,cACD,SAAUC,EAAWC,EAAKC,EAAOC,GAChC,mBACMC,UAAwBJ,EAC1BK,YAAYC,EAAQC,GAChBC,MAAMF,EAAQC,GACdE,KAAKC,gBAAkBP,EAAGQ,SAASR,EAAGS,KAAKH,KAAMA,KAAKC,iBAAkBP,EAAGU,yBAC3EJ,KAAKK,yBAA2BX,EAAGQ,SAASR,EAAGS,KAAKH,KAAMA,KAAKM,iBAAkBZ,EAAGU,yBACpFJ,KAAKO,SAETX,WACI,OAAOG,MAAMS,SAAS,OAASC,UAAW,qCAE9Cb,gBAAgBc,GACZ,MAAMC,EAAUX,KAAKY,SAAS,WAC9B,IAAKD,EACD,OAEJ,MAAME,EAAkBF,EAAQC,SAAS,mBACnCE,EAAmBH,EAAQC,SAAS,oBAC1C,IAAKC,IAAoBC,EACrB,OAEJ,MAAMC,EAAYJ,EAAQK,KACpBC,EAAczB,EAAI0B,aAAaH,GACrC,IAAII,EAAe3B,EAAI4B,mBAAmBL,EAAWL,GAAOW,EAC5DF,EAAe1B,EAAM0B,EAAc,EAAG,GAClCL,GACAA,EAAiBQ,OAAOL,EAAaE,GAErCN,GACAA,EAAgBS,OAAOL,EAAaN,EAAQY,eAGpD3B,gBAAgBc,GACZ,MAAMC,EAAUX,KAAKY,SAAS,WAC1BD,GACAA,EAAQV,gBAAgBS,GAGhCd,UACI,OAAOI,KAAKwB,SAEhB5B,UACII,KAAKyB,WAAWC,QAAQC,GAASA,EAAMC,SAAWD,EAAMC,WACnD5B,KAAK6B,YAGV7B,KAAK8B,KACD,YACA,cACD9B,KAAK+B,iBACR/B,KAAK8B,IAAI9B,KAAKgC,IAAK,YAAahC,KAAKC,iBACrCD,KAAKiC,gBACLjC,KAAKkC,SAAS,YACdlC,KAAKwB,UAAW,GAEpB5B,SACII,KAAKyB,WAAWC,QAAQC,GAASA,EAAMpB,QAAUoB,EAAMpB,UACnDP,KAAK6B,YAGT7B,KAAKmC,IACD,YACA,cACDnC,KAAK+B,iBACR/B,KAAKmC,GAAGnC,KAAKgC,IAAK,YAAahC,KAAKC,iBACpCD,KAAKoC,YAAY,YACjBpC,KAAKwB,UAAW,GAEpB5B,gBAAgBc,GACZ,MAAM2B,EAAMrC,KAAKgC,IAAIM,cACf3B,EAAUX,KAAKY,SAAS,WAC1BD,GACAA,EAAQoB,gBAAgBrB,GAE5BV,KAAKmC,GAAGE,EAAK,YAAarC,KAAKK,0BAC/BL,KAAKmC,GAAGE,EAAK,YAAarC,KAAKK,0BAC/BL,KAAKmC,GAAGE,EAAK,UAAWrC,KAAKiC,eAC7BjC,KAAKmC,GAAGE,EAAK,WAAYrC,KAAKiC,eAElCrC,cAAcc,GACV,MAAM2B,EAAMrC,KAAKgC,IAAIM,cACf3B,EAAUX,KAAKY,SAAS,WAC1BD,GACAA,EAAQsB,cAAcvB,GAE1BV,KAAK8B,IAAIO,EAAK,YAAarC,KAAKK,0BAChCL,KAAK8B,IAAIO,EAAK,YAAarC,KAAKK,0BAChCL,KAAK8B,IAAIO,EAAK,UAAWrC,KAAKiC,eAC9BjC,KAAK8B,IAAIO,EAAK,WAAYrC,KAAKiC,gBAKvC,OAFAtC,EAAgB4C,UAAUC,UAAaf,UAAW,YAClDlC,EAAUkD,kBAAkB,kBAAmB9C,GACxCA","file":"../../../control-bar/progress-control/progress-control.js","sourcesContent":["define([\n    '../../component',\n    '../../utils/dom',\n    '../../utils/clamp',\n    '../../utils/fn',\n    './seek-bar'\n], function (Component, Dom, clamp, Fn) {\n    'use strict';\n    class ProgressControl extends Component {\n        constructor(player, options) {\n            super(player, options);\n            this.handleMouseMove = Fn.throttle(Fn.bind(this, this.handleMouseMove), Fn.UPDATE_REFRESH_INTERVAL);\n            this.throttledHandleMouseSeek = Fn.throttle(Fn.bind(this, this.handleMouseSeek), Fn.UPDATE_REFRESH_INTERVAL);\n            this.enable();\n        }\n        createEl() {\n            return super.createEl('div', { className: 'vjs-progress-control vjs-control' });\n        }\n        handleMouseMove(event) {\n            const seekBar = this.getChild('seekBar');\n            if (!seekBar) {\n                return;\n            }\n            const playProgressBar = seekBar.getChild('playProgressBar');\n            const mouseTimeDisplay = seekBar.getChild('mouseTimeDisplay');\n            if (!playProgressBar && !mouseTimeDisplay) {\n                return;\n            }\n            const seekBarEl = seekBar.el();\n            const seekBarRect = Dom.findPosition(seekBarEl);\n            let seekBarPoint = Dom.getPointerPosition(seekBarEl, event).x;\n            seekBarPoint = clamp(seekBarPoint, 0, 1);\n            if (mouseTimeDisplay) {\n                mouseTimeDisplay.update(seekBarRect, seekBarPoint);\n            }\n            if (playProgressBar) {\n                playProgressBar.update(seekBarRect, seekBar.getProgress());\n            }\n        }\n        handleMouseSeek(event) {\n            const seekBar = this.getChild('seekBar');\n            if (seekBar) {\n                seekBar.handleMouseMove(event);\n            }\n        }\n        enabled() {\n            return this.enabled_;\n        }\n        disable() {\n            this.children().forEach(child => child.disable && child.disable());\n            if (!this.enabled()) {\n                return;\n            }\n            this.off([\n                'mousedown',\n                'touchstart'\n            ], this.handleMouseDown);\n            this.off(this.el_, 'mousemove', this.handleMouseMove);\n            this.handleMouseUp();\n            this.addClass('disabled');\n            this.enabled_ = false;\n        }\n        enable() {\n            this.children().forEach(child => child.enable && child.enable());\n            if (this.enabled()) {\n                return;\n            }\n            this.on([\n                'mousedown',\n                'touchstart'\n            ], this.handleMouseDown);\n            this.on(this.el_, 'mousemove', this.handleMouseMove);\n            this.removeClass('disabled');\n            this.enabled_ = true;\n        }\n        handleMouseDown(event) {\n            const doc = this.el_.ownerDocument;\n            const seekBar = this.getChild('seekBar');\n            if (seekBar) {\n                seekBar.handleMouseDown(event);\n            }\n            this.on(doc, 'mousemove', this.throttledHandleMouseSeek);\n            this.on(doc, 'touchmove', this.throttledHandleMouseSeek);\n            this.on(doc, 'mouseup', this.handleMouseUp);\n            this.on(doc, 'touchend', this.handleMouseUp);\n        }\n        handleMouseUp(event) {\n            const doc = this.el_.ownerDocument;\n            const seekBar = this.getChild('seekBar');\n            if (seekBar) {\n                seekBar.handleMouseUp(event);\n            }\n            this.off(doc, 'mousemove', this.throttledHandleMouseSeek);\n            this.off(doc, 'touchmove', this.throttledHandleMouseSeek);\n            this.off(doc, 'mouseup', this.handleMouseUp);\n            this.off(doc, 'touchend', this.handleMouseUp);\n        }\n    }\n    ProgressControl.prototype.options_ = { children: ['seekBar'] };\n    Component.registerComponent('ProgressControl', ProgressControl);\n    return ProgressControl;\n});"]}