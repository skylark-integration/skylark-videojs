{"version":3,"sources":["slider/slider.js"],"names":["define","Component","Dom","obj","browser","clamp","keycode","Slider","[object Object]","player","options","super","this","bar","getChild","options_","barName","vertical","enable","enabled_","enabled","on","handleMouseDown","handleKeyDown","handleClick","player_","update","playerEvent","removeClass","setAttribute","doc","el_","ownerDocument","off","handleMouseMove","handleMouseUp","removeAttribute","addClass","type","props","attributes","className","assign","tabIndex","role","aria-valuenow","aria-valuemin","aria-valuemax","createEl","event","preventDefault","IS_CHROME","blockTextSelection","trigger","unblockTextSelection","progress","getProgress","progress_","requestNamedAnimationFrame","sizeKey","el","style","toFixed","Number","getPercent","position","getPointerPosition","y","x","isEventKey","stopPropagation","stepBack","stepForward","bool","undefined","vertical_","registerComponent"],"mappings":";;;;;;;AAAAA,QACI,eACA,eACA,eACA,mBACA,iBACA,oBACD,SAAUC,EAAWC,EAAKC,EAAKC,EAASC,EAAOC,GAC9C,mBACMC,UAAeN,EACjBO,YAAYC,EAAQC,GAChBC,MAAMF,EAAQC,GACdE,KAAKC,IAAMD,KAAKE,SAASF,KAAKG,SAASC,SACvCJ,KAAKK,WAAWL,KAAKG,SAASE,UAC9BL,KAAKM,SAETV,UACI,OAAOI,KAAKO,SAEhBX,SACQI,KAAKQ,YAGTR,KAAKS,GAAG,YAAaT,KAAKU,iBAC1BV,KAAKS,GAAG,aAAcT,KAAKU,iBAC3BV,KAAKS,GAAG,UAAWT,KAAKW,eACxBX,KAAKS,GAAG,QAAST,KAAKY,aACtBZ,KAAKS,GAAGT,KAAKa,QAAS,kBAAmBb,KAAKc,QAC1Cd,KAAKe,aACLf,KAAKS,GAAGT,KAAKa,QAASb,KAAKe,YAAaf,KAAKc,QAEjDd,KAAKgB,YAAY,YACjBhB,KAAKiB,aAAa,WAAY,GAC9BjB,KAAKO,UAAW,GAEpBX,UACI,IAAKI,KAAKQ,UACN,OAEJ,MAAMU,EAAMlB,KAAKC,IAAIkB,IAAIC,cACzBpB,KAAKqB,IAAI,YAAarB,KAAKU,iBAC3BV,KAAKqB,IAAI,aAAcrB,KAAKU,iBAC5BV,KAAKqB,IAAI,UAAWrB,KAAKW,eACzBX,KAAKqB,IAAI,QAASrB,KAAKY,aACvBZ,KAAKqB,IAAIrB,KAAKa,QAAS,kBAAmBb,KAAKc,QAC/Cd,KAAKqB,IAAIH,EAAK,YAAalB,KAAKsB,iBAChCtB,KAAKqB,IAAIH,EAAK,UAAWlB,KAAKuB,eAC9BvB,KAAKqB,IAAIH,EAAK,YAAalB,KAAKsB,iBAChCtB,KAAKqB,IAAIH,EAAK,WAAYlB,KAAKuB,eAC/BvB,KAAKwB,gBAAgB,YACrBxB,KAAKyB,SAAS,YACVzB,KAAKe,aACLf,KAAKqB,IAAIrB,KAAKa,QAASb,KAAKe,YAAaf,KAAKc,QAElDd,KAAKO,UAAW,EAEpBX,SAAS8B,EAAMC,KAAYC,MAUvB,OATAD,EAAME,UAAYF,EAAME,UAAY,cACpCF,EAAQpC,EAAIuC,QAASC,SAAU,GAAKJ,GACpCC,EAAarC,EAAIuC,QACbE,KAAQ,SACRC,gBAAiB,EACjBC,gBAAiB,EACjBC,gBAAiB,IACjBJ,SAAY,GACbH,GACI7B,MAAMqC,SAASV,EAAMC,EAAOC,GAEvChC,gBAAgByC,GACZ,MAAMnB,EAAMlB,KAAKC,IAAIkB,IAAIC,cACN,cAAfiB,EAAMX,MACNW,EAAMC,iBAES,eAAfD,EAAMX,MAA0BlC,EAAQ+C,WACxCF,EAAMC,iBAEVhD,EAAIkD,qBACJxC,KAAKyB,SAAS,eACdzB,KAAKyC,QAAQ,gBACbzC,KAAKS,GAAGS,EAAK,YAAalB,KAAKsB,iBAC/BtB,KAAKS,GAAGS,EAAK,UAAWlB,KAAKuB,eAC7BvB,KAAKS,GAAGS,EAAK,YAAalB,KAAKsB,iBAC/BtB,KAAKS,GAAGS,EAAK,WAAYlB,KAAKuB,eAC9BvB,KAAKsB,gBAAgBe,GAEzBzC,gBAAgByC,IAEhBzC,gBACI,MAAMsB,EAAMlB,KAAKC,IAAIkB,IAAIC,cACzB9B,EAAIoD,uBACJ1C,KAAKgB,YAAY,eACjBhB,KAAKyC,QAAQ,kBACbzC,KAAKqB,IAAIH,EAAK,YAAalB,KAAKsB,iBAChCtB,KAAKqB,IAAIH,EAAK,UAAWlB,KAAKuB,eAC9BvB,KAAKqB,IAAIH,EAAK,YAAalB,KAAKsB,iBAChCtB,KAAKqB,IAAIH,EAAK,WAAYlB,KAAKuB,eAC/BvB,KAAKc,SAETlB,SACI,IAAKI,KAAKmB,MAAQnB,KAAKC,IACnB,OAEJ,MAAM0C,EAAW3C,KAAK4C,cACtB,OAAID,IAAa3C,KAAK6C,UACXF,GAEX3C,KAAK6C,UAAYF,EACjB3C,KAAK8C,2BAA2B,gBAAiB,KAC7C,MAAMC,EAAU/C,KAAKK,WAAa,SAAW,QAC7CL,KAAKC,IAAI+C,KAAKC,MAAMF,IAAuB,IAAXJ,GAAgBO,QAAQ,GAAK,MAE1DP,GAEX/C,cACI,OAAOuD,OAAO1D,EAAMO,KAAKoD,aAAc,EAAG,GAAGF,QAAQ,IAEzDtD,kBAAkByC,GACd,MAAMgB,EAAW/D,EAAIgE,mBAAmBtD,KAAKmB,IAAKkB,GAClD,OAAIrC,KAAKK,WACEgD,EAASE,EAEbF,EAASG,EAEpB5D,cAAcyC,GACN3C,EAAQ+D,WAAWpB,EAAO,SAAW3C,EAAQ+D,WAAWpB,EAAO,SAC/DA,EAAMC,iBACND,EAAMqB,kBACN1D,KAAK2D,YACEjE,EAAQ+D,WAAWpB,EAAO,UAAY3C,EAAQ+D,WAAWpB,EAAO,OACvEA,EAAMC,iBACND,EAAMqB,kBACN1D,KAAK4D,eAEL7D,MAAMY,cAAc0B,GAG5BzC,YAAYyC,GACRA,EAAMqB,kBACNrB,EAAMC,iBAEV1C,SAASiE,GACL,QAAaC,IAATD,EACA,OAAO7D,KAAK+D,YAAa,EAE7B/D,KAAK+D,YAAcF,EACf7D,KAAK+D,UACL/D,KAAKyB,SAAS,uBAEdzB,KAAKyB,SAAS,0BAK1B,OADApC,EAAU2E,kBAAkB,SAAUrE,GAC/BA","file":"../../slider/slider.js","sourcesContent":["define([\n    '../component',\n    '../utils/dom',\n    '../utils/obj',\n    '../utils/browser',\n    '../utils/clamp',\n    '../utils/keycode'\n], function (Component, Dom, obj, browser, clamp, keycode) {\n    'use strict';\n    class Slider extends Component {\n        constructor(player, options) {\n            super(player, options);\n            this.bar = this.getChild(this.options_.barName);\n            this.vertical(!!this.options_.vertical);\n            this.enable();\n        }\n        enabled() {\n            return this.enabled_;\n        }\n        enable() {\n            if (this.enabled()) {\n                return;\n            }\n            this.on('mousedown', this.handleMouseDown);\n            this.on('touchstart', this.handleMouseDown);\n            this.on('keydown', this.handleKeyDown);\n            this.on('click', this.handleClick);\n            this.on(this.player_, 'controlsvisible', this.update);\n            if (this.playerEvent) {\n                this.on(this.player_, this.playerEvent, this.update);\n            }\n            this.removeClass('disabled');\n            this.setAttribute('tabindex', 0);\n            this.enabled_ = true;\n        }\n        disable() {\n            if (!this.enabled()) {\n                return;\n            }\n            const doc = this.bar.el_.ownerDocument;\n            this.off('mousedown', this.handleMouseDown);\n            this.off('touchstart', this.handleMouseDown);\n            this.off('keydown', this.handleKeyDown);\n            this.off('click', this.handleClick);\n            this.off(this.player_, 'controlsvisible', this.update);\n            this.off(doc, 'mousemove', this.handleMouseMove);\n            this.off(doc, 'mouseup', this.handleMouseUp);\n            this.off(doc, 'touchmove', this.handleMouseMove);\n            this.off(doc, 'touchend', this.handleMouseUp);\n            this.removeAttribute('tabindex');\n            this.addClass('disabled');\n            if (this.playerEvent) {\n                this.off(this.player_, this.playerEvent, this.update);\n            }\n            this.enabled_ = false;\n        }\n        createEl(type, props = {}, attributes = {}) {\n            props.className = props.className + ' vjs-slider';\n            props = obj.assign({ tabIndex: 0 }, props);\n            attributes = obj.assign({\n                'role': 'slider',\n                'aria-valuenow': 0,\n                'aria-valuemin': 0,\n                'aria-valuemax': 100,\n                'tabIndex': 0\n            }, attributes);\n            return super.createEl(type, props, attributes);\n        }\n        handleMouseDown(event) {\n            const doc = this.bar.el_.ownerDocument;\n            if (event.type === 'mousedown') {\n                event.preventDefault();\n            }\n            if (event.type === 'touchstart' && !browser.IS_CHROME) {\n                event.preventDefault();\n            }\n            Dom.blockTextSelection();\n            this.addClass('vjs-sliding');\n            this.trigger('slideractive');\n            this.on(doc, 'mousemove', this.handleMouseMove);\n            this.on(doc, 'mouseup', this.handleMouseUp);\n            this.on(doc, 'touchmove', this.handleMouseMove);\n            this.on(doc, 'touchend', this.handleMouseUp);\n            this.handleMouseMove(event);\n        }\n        handleMouseMove(event) {\n        }\n        handleMouseUp() {\n            const doc = this.bar.el_.ownerDocument;\n            Dom.unblockTextSelection();\n            this.removeClass('vjs-sliding');\n            this.trigger('sliderinactive');\n            this.off(doc, 'mousemove', this.handleMouseMove);\n            this.off(doc, 'mouseup', this.handleMouseUp);\n            this.off(doc, 'touchmove', this.handleMouseMove);\n            this.off(doc, 'touchend', this.handleMouseUp);\n            this.update();\n        }\n        update() {\n            if (!this.el_ || !this.bar) {\n                return;\n            }\n            const progress = this.getProgress();\n            if (progress === this.progress_) {\n                return progress;\n            }\n            this.progress_ = progress;\n            this.requestNamedAnimationFrame('Slider#update', () => {\n                const sizeKey = this.vertical() ? 'height' : 'width';\n                this.bar.el().style[sizeKey] = (progress * 100).toFixed(2) + '%';\n            });\n            return progress;\n        }\n        getProgress() {\n            return Number(clamp(this.getPercent(), 0, 1).toFixed(4));\n        }\n        calculateDistance(event) {\n            const position = Dom.getPointerPosition(this.el_, event);\n            if (this.vertical()) {\n                return position.y;\n            }\n            return position.x;\n        }\n        handleKeyDown(event) {\n            if (keycode.isEventKey(event, 'Left') || keycode.isEventKey(event, 'Down')) {\n                event.preventDefault();\n                event.stopPropagation();\n                this.stepBack();\n            } else if (keycode.isEventKey(event, 'Right') || keycode.isEventKey(event, 'Up')) {\n                event.preventDefault();\n                event.stopPropagation();\n                this.stepForward();\n            } else {\n                super.handleKeyDown(event);\n            }\n        }\n        handleClick(event) {\n            event.stopPropagation();\n            event.preventDefault();\n        }\n        vertical(bool) {\n            if (bool === undefined) {\n                return this.vertical_ || false;\n            }\n            this.vertical_ = !!bool;\n            if (this.vertical_) {\n                this.addClass('vjs-slider-vertical');\n            } else {\n                this.addClass('vjs-slider-horizontal');\n            }\n        }\n    }\n    Component.registerComponent('Slider', Slider);\n    return Slider;\n});"]}