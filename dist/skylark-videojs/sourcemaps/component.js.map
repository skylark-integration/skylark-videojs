{"version":3,"sources":["component.js"],"names":["define","langx","eventer","Widget","stateful","Dom","DomData","Fn","Guid","stringCases","mergeOptions","computedStyle","Map","Set","NativeEvents","drag","dragend","dragenter","dragexit","dragleave","dragover","dragstart","drop","abort","change","error","selectionchange","submit","reset","fullscreenchange","fullscreenerror","focus","blur","focusin","focusout","keydown","keypress","keyup","message","click","contextmenu","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","progress","textInput","tap","touchstart","touchmove","touchend","load","resize","select","scroll","unload","wheel","Component","[object Object]","events","isString","isArray","i","length","selector","data","callback","ctx","one","this","el_","isNativeEvent","on","super","off","obj","event","nodeType","listenTo","unlistenTo","player","options","ready","play","player_","isDisposed_","parentComponent_","options_","id_","id","el","newGUID","name_","name","createEl","evented","handleLanguagechange","bind","constructor","defaultState","children_","childIndex_","childNameIndex_","setTimeoutIds_","setIntervalIds_","rafIds_","namedRafs_","clearingTimersOnDispose_","initChildren","reportTouchActivity","enableTouchActivity","readyQueue_","trigger","type","bubbles","dispose","parentNode","removeChild","clear","Boolean","tagName","properties","attributes","string","tokens","defaultValue","code","language","languages","primaryCode","split","primaryLang","localizedString","replace","match","index","value","ret","contentEl_","names","reduce","acc","n","concat","currentChild","getChild","child","component","componentName","toTitleCase","componentClassName","componentClass","ComponentClass","getComponent","Error","splice","toLowerCase","refNode","isEl","contentEl","insertBefore","childFound","compEl","children","parentOptions","handleAdd","opts","undefined","playerOptions","newChild","addChild","workingChildren","Tech","Array","Object","keys","filter","some","wchild","map","c","isTech","forEach","fn","sync","isReady_","call","setTimeout","push","readyQueue","context","$","$$","classToCheck","hasClass","classToAdd","addClass","classToRemove","removeClass","classToToggle","predicate","toggleClass","attribute","getAttribute","setAttribute","removeAttribute","num","skipListeners","dimension","width","height","widthOrHeight","indexOf","style","val","pxIndex","parseInt","slice","computedWidthOrHeight","parseFloat","isNaN","rule","currentDimension","stopPropagation","handleKeyDown","touchStart","firstTouch","couldBeTap","touches","pageX","pageY","window","performance","now","xdiff","ydiff","Math","sqrt","noTap","preventDefault","reportUserActivity","report","touchHolding","clearInterval","setInterval","touchEnd","timeout","timeoutId","clearTimersOnDispose_","has","delete","add","clearTimeout","interval","intervalId","supportsRaf_","requestAnimationFrame","set","cancelAnimationFrame","get","listenToOnce","idName","cancelName","key","ComponentToRegister","isComp","prototype","isPrototypeOf","reason","components_","Player","players","playerNames","pname","every","registerComponent"],"mappings":"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","file":"../component.js","sourcesContent":["define([\n    \"skylark-langx\",\n    \"skylark-domx-eventer\",\n    \"skylark-widgets-base/Widget\",\n    ///'./mixins/evented',\n    './mixins/stateful',\n    './utils/dom',\n    './utils/dom-data',\n    './utils/fn',\n    './utils/guid',\n    './utils/string-cases',\n    './utils/merge-options',\n    './utils/computed-style',\n    './utils/map',\n    './utils/set'\n], function (langx,eventer,Widget, stateful, Dom, DomData, Fn, Guid, stringCases, mergeOptions, computedStyle, Map, Set) {\n    'use strict';\n\n    function isNativeEvent(el,events) {\n        if (langx.isString(events)) {\n            return el[\"on\"+ events] !== undefined;\n        } else if (langx.isArray(events)) {\n            for (var i=0; i<events.length; i++) {\n                if (el[\"on\"+ events[i]] !== undefined) {\n                    return true;\n                }\n            }\n            return events.length > 0;\n        }\n    }\n\n    const NativeEvents = {\n            \"drag\": 2, // DragEvent\n            \"dragend\": 2, // DragEvent\n            \"dragenter\": 2, // DragEvent\n            \"dragexit\": 2, // DragEvent\n            \"dragleave\": 2, // DragEvent\n            \"dragover\": 2, // DragEvent\n            \"dragstart\": 2, // DragEvent\n            \"drop\": 2, // DragEvent\n\n            \"abort\": 3, // Event\n            \"change\": 3, // Event\n            \"error\": 3, // Event\n            \"selectionchange\": 3, // Event\n            \"submit\": 3, // Event\n            \"reset\": 3, // Event\n            'fullscreenchange':3,\n            'fullscreenerror':3,\n\n/*\n            'disablepictureinpicturechanged':3,\n            'ended':3,\n            'enterpictureinpicture':3,\n            'durationchange':3,\n            'leavepictureinpicture':3,\n            'loadstart' : 3,\n            'loadedmetadata':3,\n            'pause' : 3,\n            'play':3,\n            'posterchange':3,\n            'ratechange':3,\n            'seeking' : 3,\n            'sourceset':3,\n            'suspend':3,\n            'textdata':3,\n            'texttrackchange':3,\n            'timeupdate':3,\n            'volumechange':3,\n            'waiting' : 3,\n*/\n\n\n            \"focus\": 4, // FocusEvent\n            \"blur\": 4, // FocusEvent\n            \"focusin\": 4, // FocusEvent\n            \"focusout\": 4, // FocusEvent\n\n            \"keydown\": 5, // KeyboardEvent\n            \"keypress\": 5, // KeyboardEvent\n            \"keyup\": 5, // KeyboardEvent\n\n            \"message\": 6, // MessageEvent\n\n            \"click\": 7, // MouseEvent\n            \"contextmenu\": 7, // MouseEvent\n            \"dblclick\": 7, // MouseEvent\n            \"mousedown\": 7, // MouseEvent\n            \"mouseup\": 7, // MouseEvent\n            \"mousemove\": 7, // MouseEvent\n            \"mouseover\": 7, // MouseEvent\n            \"mouseout\": 7, // MouseEvent\n            \"mouseenter\": 7, // MouseEvent\n            \"mouseleave\": 7, // MouseEvent\n\n\n            \"progress\" : 11, //ProgressEvent\n\n            \"textInput\": 12, // TextEvent\n\n            \"tap\": 13,\n            \"touchstart\": 13, // TouchEvent\n            \"touchmove\": 13, // TouchEvent\n            \"touchend\": 13, // TouchEvent\n\n            \"load\": 14, // UIEvent\n            \"resize\": 14, // UIEvent\n            \"select\": 14, // UIEvent\n            \"scroll\": 14, // UIEvent\n            \"unload\": 14, // UIEvent,\n\n            \"wheel\": 15, // WheelEvent\n\n    };\n\n    class Component extends Widget {\n        isNativeEvent(events) {\n            if (langx.isString(events)) {\n                return !!NativeEvents[events];\n            } else if (langx.isArray(events)) {\n                for (var i=0; i<events.length; i++) {\n                    if (NativeEvents[events[i]]) {\n                        return true;\n                    }\n                }\n                return false;\n            }            \n\n        }   \n\n        on(events, selector, data, callback, ctx, /*used internally*/ one) {\n            if (this.el_ && this.isNativeEvent(events)) {\n                eventer.on(this.el_,events,selector,data,callback,ctx,one);\n            } else {\n                super.on(events, selector, data, callback, ctx,  one);\n            }\n        }   \n\n        off(events, callback) {\n            if (this.el_ && this.isNativeEvent(events)) {\n                eventer.off(this.el_,events,callback);\n            } else {\n                super.off(events,callback);\n            }\n        }\n\n        listenTo (obj, event, callback, /*used internally*/ one) {\n            if (langx.isString(obj) || langx.isArray(obj)) {\n                one = callback;\n                callback = event;\n                event = obj;\n                if (this.el_ && this.isNativeEvent(event)) {\n                    eventer.on(this.el_,event,callback,this,one);\n                } else {\n                    this.on(event,callback,this,one);\n                }\n            } else {\n                if (obj.nodeType) {\n                    eventer.on(obj,event,callback,this,one)\n                } else {\n                    super.listenTo(obj,event,callback,one)\n                }                \n            }\n        }\n\n        unlistenTo(obj, event, callback) {\n            if (langx.isString(obj) || langx.isArray(obj)) {\n                callback = event;\n                event = obj;\n                if (this.el_ && this.isNativeEvent(event)) {\n                    eventer.off(this.el_,event,callback);\n                } else {\n                    this.off(event,callback);                   \n                }\n            } else {\n                if (obj.nodeType) {\n                    eventer.off(obj,event,callback)\n                } else {\n                    super.unlistenTo(obj,event,callback)\n                }\n            }\n        }\n\n        _create() {\n\n        }\n\n\n        _construct(player, options, ready) {\n            /*\n            var el;\n            if (options.el) {\n               el = options.el;\n            } else if (options.createEl !== false) {\n                el = this.createEl();\n            }\n            super(el);\n            */\n\n            if (!player && this.play) {\n                this.player_ = player = this;\n            } else {\n                this.player_ = player;\n            }\n            this.isDisposed_ = false;\n            this.parentComponent_ = null;\n            this.options_ = mergeOptions({}, this.options_);\n            options = this.options_ = mergeOptions(this.options_, options);\n            this.id_ = options.id || options.el && options.el.id;\n            if (!this.id_) {\n                const id = player && player.id && player.id() || 'no_player';\n                this.id_ = `${ id }_component_${ Guid.newGUID() }`;\n            }\n            this.name_ = options.name || null;\n            if (options.el) {\n               this.el_ = options.el;\n            } else if (options.createEl !== false) {\n                this.el_ = this.createEl();\n            }\n            //this.el_ = this._elm;\n\n            if (options.evented !== false) {\n                ///evented(this, { eventBusKey: this.el_ ? 'el_' : null });\n                this.handleLanguagechange = this.handleLanguagechange.bind(this);\n                ///this.listenTo(this.player_, 'languagechange', this.handleLanguagechange);\n                this.listenTo(this.player_, 'languagechange', this.handleLanguagechange);\n            }\n\n\n            stateful(this, this.constructor.defaultState);\n            this.children_ = [];\n            this.childIndex_ = {};\n            this.childNameIndex_ = {};\n            this.setTimeoutIds_ = new Set();\n            this.setIntervalIds_ = new Set();\n            this.rafIds_ = new Set();\n            this.namedRafs_ = new Map();\n            this.clearingTimersOnDispose_ = false;\n            if (options.initChildren !== false) {\n                this.initChildren();\n            }\n            this.ready(ready);\n            if (options.reportTouchActivity !== false) {\n                this.enableTouchActivity();\n            }\n        }\n        dispose() {\n            if (this.isDisposed_) {\n                return;\n            }\n            if (this.readyQueue_) {\n                this.readyQueue_.length = 0;\n            }\n            this.trigger({\n                type: 'dispose',\n                bubbles: false\n            });\n            this.isDisposed_ = true;\n            if (this.children_) {\n                for (let i = this.children_.length - 1; i >= 0; i--) {\n                    if (this.children_[i].dispose) {\n                        this.children_[i].dispose();\n                    }\n                }\n            }\n            this.children_ = null;\n            this.childIndex_ = null;\n            this.childNameIndex_ = null;\n            this.parentComponent_ = null;\n            if (this.el_) {\n                if (this.el_.parentNode) {\n                    this.el_.parentNode.removeChild(this.el_);\n                }\n                ///if (DomData.has(this.el_)) {\n                ///    DomData.delete(this.el_);\n                ///}\n                eventer.clear(this.el_);\n                this.el_ = null;\n            }\n            this.player_ = null;\n        }\n        isDisposed() {\n            return Boolean(this.isDisposed_);\n        }\n        player() {\n            return this.player_;\n        }\n        options(obj) {\n            if (!obj) {\n                return this.options_;\n            }\n            this.options_ = mergeOptions(this.options_, obj);\n            return this.options_;\n        }\n        el() {\n            return this.el_;\n        }\n        createEl(tagName, properties, attributes) {\n            return Dom.createEl(tagName, properties, attributes);\n        }\n        localize(string, tokens, defaultValue = string) {\n            const code = this.player_.language && this.player_.language();\n            const languages = this.player_.languages && this.player_.languages();\n            const language = languages && languages[code];\n            const primaryCode = code && code.split('-')[0];\n            const primaryLang = languages && languages[primaryCode];\n            let localizedString = defaultValue;\n            if (language && language[string]) {\n                localizedString = language[string];\n            } else if (primaryLang && primaryLang[string]) {\n                localizedString = primaryLang[string];\n            }\n            if (tokens) {\n                localizedString = localizedString.replace(/\\{(\\d+)\\}/g, function (match, index) {\n                    const value = tokens[index - 1];\n                    let ret = value;\n                    if (typeof value === 'undefined') {\n                        ret = match;\n                    }\n                    return ret;\n                });\n            }\n            return localizedString;\n        }\n        handleLanguagechange() {\n        }\n        contentEl() {\n            return this.contentEl_ || this.el_;\n        }\n        id() {\n            return this.id_;\n        }\n        name() {\n            return this.name_;\n        }\n        children() {\n            return this.children_;\n        }\n        getChildById(id) {\n            return this.childIndex_[id];\n        }\n        getChild(name) {\n            if (!name) {\n                return;\n            }\n            return this.childNameIndex_[name];\n        }\n        getDescendant(...names) {\n            names = names.reduce((acc, n) => acc.concat(n), []);\n            let currentChild = this;\n            for (let i = 0; i < names.length; i++) {\n                currentChild = currentChild.getChild(names[i]);\n                if (!currentChild || !currentChild.getChild) {\n                    return;\n                }\n            }\n            return currentChild;\n        }\n        addChild(child, options = {}, index = this.children_.length) {\n            let component;\n            let componentName;\n            if (typeof child === 'string') {\n                componentName = stringCases.toTitleCase(child);\n                const componentClassName = options.componentClass || componentName;\n                options.name = componentName;\n                const ComponentClass = Component.getComponent(componentClassName);\n                if (!ComponentClass) {\n                    throw new Error(`Component ${ componentClassName } does not exist`);\n                }\n                if (typeof ComponentClass !== 'function') {\n                    return null;\n                }\n                component = new ComponentClass(this.player_ || this, options);\n            } else {\n                component = child;\n            }\n            if (component.parentComponent_) {\n                component.parentComponent_.removeChild(component);\n            }\n            this.children_.splice(index, 0, component);\n            component.parentComponent_ = this;\n            if (typeof component.id === 'function') {\n                this.childIndex_[component.id()] = component;\n            }\n            componentName = componentName || component.name && stringCases.toTitleCase(component.name());\n            if (componentName) {\n                this.childNameIndex_[componentName] = component;\n                this.childNameIndex_[stringCases.toLowerCase(componentName)] = component;\n            }\n            if (typeof component.el === 'function' && component.el()) {\n                let refNode = null;\n                if (this.children_[index + 1]) {\n                    if (this.children_[index + 1].el_) {\n                        refNode = this.children_[index + 1].el_;\n                    } else if (Dom.isEl(this.children_[index + 1])) {\n                        refNode = this.children_[index + 1];\n                    }\n                }\n                this.contentEl().insertBefore(component.el(), refNode);\n            }\n            return component;\n        }\n        removeChild(component) {\n            if (typeof component === 'string') {\n                component = this.getChild(component);\n            }\n            if (!component || !this.children_) {\n                return;\n            }\n            let childFound = false;\n            for (let i = this.children_.length - 1; i >= 0; i--) {\n                if (this.children_[i] === component) {\n                    childFound = true;\n                    this.children_.splice(i, 1);\n                    break;\n                }\n            }\n            if (!childFound) {\n                return;\n            }\n            component.parentComponent_ = null;\n            this.childIndex_[component.id()] = null;\n            this.childNameIndex_[stringCases.toTitleCase(component.name())] = null;\n            this.childNameIndex_[stringCases.toLowerCase(component.name())] = null;\n            const compEl = component.el();\n            if (compEl && compEl.parentNode === this.contentEl()) {\n                this.contentEl().removeChild(component.el());\n            }\n        }\n        initChildren() {\n            const children = this.options_.children;\n            if (children) {\n                const parentOptions = this.options_;\n                const handleAdd = child => {\n                    const name = child.name;\n                    let opts = child.opts;\n                    if (parentOptions[name] !== undefined) {\n                        opts = parentOptions[name];\n                    }\n                    if (opts === false) {\n                        return;\n                    }\n                    if (opts === true) {\n                        opts = {};\n                    }\n                    opts.playerOptions = this.options_.playerOptions;\n                    const newChild = this.addChild(name, opts);\n                    if (newChild) {\n                        this[name] = newChild;\n                    }\n                };\n                let workingChildren;\n                const Tech = Component.getComponent('Tech');\n                if (Array.isArray(children)) {\n                    workingChildren = children;\n                } else {\n                    workingChildren = Object.keys(children);\n                }\n                workingChildren.concat(Object.keys(this.options_).filter(function (child) {\n                    return !workingChildren.some(function (wchild) {\n                        if (typeof wchild === 'string') {\n                            return child === wchild;\n                        }\n                        return child === wchild.name;\n                    });\n                })).map(child => {\n                    let name;\n                    let opts;\n                    if (typeof child === 'string') {\n                        name = child;\n                        opts = children[name] || this.options_[name] || {};\n                    } else {\n                        name = child.name;\n                        opts = child;\n                    }\n                    return {\n                        name,\n                        opts\n                    };\n                }).filter(child => {\n                    const c = Component.getComponent(child.opts.componentClass || stringCases.toTitleCase(child.name));\n                    return c && !Tech.isTech(c);\n                }).forEach(handleAdd);\n            }\n        }\n        buildCSSClass() {\n            return '';\n        }\n        ready(fn, sync = false) {\n            if (!fn) {\n                return;\n            }\n            if (!this.isReady_) {\n                this.readyQueue_ = this.readyQueue_ || [];\n                this.readyQueue_.push(fn);\n                return;\n            }\n            if (sync) {\n                fn.call(this);\n            } else {\n                this.setTimeout(fn, 1);\n            }\n        }\n        triggerReady() {\n            this.isReady_ = true;\n            this.setTimeout(function () {\n                const readyQueue = this.readyQueue_;\n                this.readyQueue_ = [];\n                if (readyQueue && readyQueue.length > 0) {\n                    readyQueue.forEach(function (fn) {\n                        fn.call(this);\n                    }, this);\n                }\n                this.trigger('ready');\n            }, 1);\n        }\n        $(selector, context) {\n            return Dom.$(selector, context || this.contentEl());\n        }\n        $$(selector, context) {\n            return Dom.$$(selector, context || this.contentEl());\n        }\n        hasClass(classToCheck) {\n            return Dom.hasClass(this.el_, classToCheck);\n        }\n        addClass(classToAdd) {\n            Dom.addClass(this.el_, classToAdd);\n        }\n        removeClass(classToRemove) {\n            Dom.removeClass(this.el_, classToRemove);\n        }\n        toggleClass(classToToggle, predicate) {\n            Dom.toggleClass(this.el_, classToToggle, predicate);\n        }\n        show() {\n            this.removeClass('vjs-hidden');\n        }\n        hide() {\n            this.addClass('vjs-hidden');\n        }\n        lockShowing() {\n            this.addClass('vjs-lock-showing');\n        }\n        unlockShowing() {\n            this.removeClass('vjs-lock-showing');\n        }\n        getAttribute(attribute) {\n            return Dom.getAttribute(this.el_, attribute);\n        }\n        setAttribute(attribute, value) {\n            Dom.setAttribute(this.el_, attribute, value);\n        }\n        removeAttribute(attribute) {\n            Dom.removeAttribute(this.el_, attribute);\n        }\n        width(num, skipListeners) {\n            return this.dimension('width', num, skipListeners);\n        }\n        height(num, skipListeners) {\n            return this.dimension('height', num, skipListeners);\n        }\n        dimensions(width, height) {\n            this.width(width, true);\n            this.height(height);\n        }\n        dimension(widthOrHeight, num, skipListeners) {\n            if (num !== undefined) {\n                if (num === null || num !== num) {\n                    num = 0;\n                }\n                if (('' + num).indexOf('%') !== -1 || ('' + num).indexOf('px') !== -1) {\n                    this.el_.style[widthOrHeight] = num;\n                } else if (num === 'auto') {\n                    this.el_.style[widthOrHeight] = '';\n                } else {\n                    this.el_.style[widthOrHeight] = num + 'px';\n                }\n                if (!skipListeners) {\n                    this.trigger('componentresize');\n                }\n                return;\n            }\n            if (!this.el_) {\n                return 0;\n            }\n            const val = this.el_.style[widthOrHeight];\n            const pxIndex = val.indexOf('px');\n            if (pxIndex !== -1) {\n                return parseInt(val.slice(0, pxIndex), 10);\n            }\n            return parseInt(this.el_['offset' + stringCases.toTitleCase(widthOrHeight)], 10);\n        }\n        currentDimension(widthOrHeight) {\n            let computedWidthOrHeight = 0;\n            if (widthOrHeight !== 'width' && widthOrHeight !== 'height') {\n                throw new Error('currentDimension only accepts width or height value');\n            }\n            computedWidthOrHeight = computedStyle(this.el_, widthOrHeight);\n            computedWidthOrHeight = parseFloat(computedWidthOrHeight);\n            if (computedWidthOrHeight === 0 || isNaN(computedWidthOrHeight)) {\n                const rule = `offset${ stringCases.toTitleCase(widthOrHeight) }`;\n                computedWidthOrHeight = this.el_[rule];\n            }\n            return computedWidthOrHeight;\n        }\n        currentDimensions() {\n            return {\n                width: this.currentDimension('width'),\n                height: this.currentDimension('height')\n            };\n        }\n        currentWidth() {\n            return this.currentDimension('width');\n        }\n        currentHeight() {\n            return this.currentDimension('height');\n        }\n        focus() {\n            this.el_.focus();\n        }\n        blur() {\n            this.el_.blur();\n        }\n        handleKeyDown(event) {\n            if (this.player_) {\n                event.stopPropagation();\n                this.player_.handleKeyDown(event);\n            }\n        }\n        handleKeyPress(event) {\n            this.handleKeyDown(event);\n        }\n        emitTapEvents() {\n            let touchStart = 0;\n            let firstTouch = null;\n            const tapMovementThreshold = 10;\n            const touchTimeThreshold = 200;\n            let couldBeTap;\n            this.listenTo('touchstart', function (event) {\n                if (event.touches.length === 1) {\n                    firstTouch = {\n                        pageX: event.touches[0].pageX,\n                        pageY: event.touches[0].pageY\n                    };\n                    touchStart = window.performance.now();\n                    couldBeTap = true;\n                }\n            });\n            this.listenTo('touchmove', function (event) {\n                if (event.touches.length > 1) {\n                    couldBeTap = false;\n                } else if (firstTouch) {\n                    const xdiff = event.touches[0].pageX - firstTouch.pageX;\n                    const ydiff = event.touches[0].pageY - firstTouch.pageY;\n                    const touchDistance = Math.sqrt(xdiff * xdiff + ydiff * ydiff);\n                    if (touchDistance > tapMovementThreshold) {\n                        couldBeTap = false;\n                    }\n                }\n            });\n            const noTap = function () {\n                couldBeTap = false;\n            };\n            this.listenTo('touchleave', noTap);\n            this.listenTo('touchcancel', noTap);\n            this.listenTo('touchend', function (event) {\n                firstTouch = null;\n                if (couldBeTap === true) {\n                    const touchTime = window.performance.now() - touchStart;\n                    if (touchTime < touchTimeThreshold) {\n                        event.preventDefault();\n                        this.trigger('tap');\n                    }\n                }\n            });\n        }\n        enableTouchActivity() {\n            if (!this.player() || !this.player().reportUserActivity) {\n                return;\n            }\n            const report = Fn.bind(this.player(), this.player().reportUserActivity);\n            let touchHolding;\n            this.listenTo('touchstart', function () {\n                report();\n                this.clearInterval(touchHolding);\n                touchHolding = this.setInterval(report, 250);\n            });\n            const touchEnd = function (event) {\n                report();\n                this.clearInterval(touchHolding);\n            };\n            this.listenTo('touchmove', report);\n            this.listenTo('touchend', touchEnd);\n            this.listenTo('touchcancel', touchEnd);\n        }\n        setTimeout(fn, timeout) {\n            var timeoutId, disposeFn;\n            fn = Fn.bind(this, fn);\n            this.clearTimersOnDispose_();\n            timeoutId = window.setTimeout(() => {\n                if (this.setTimeoutIds_.has(timeoutId)) {\n                    this.setTimeoutIds_.delete(timeoutId);\n                }\n                fn();\n            }, timeout);\n            this.setTimeoutIds_.add(timeoutId);\n            return timeoutId;\n        }\n        clearTimeout(timeoutId) {\n            if (this.setTimeoutIds_.has(timeoutId)) {\n                this.setTimeoutIds_.delete(timeoutId);\n                window.clearTimeout(timeoutId);\n            }\n            return timeoutId;\n        }\n        setInterval(fn, interval) {\n            fn = Fn.bind(this, fn);\n            this.clearTimersOnDispose_();\n            const intervalId = window.setInterval(fn, interval);\n            this.setIntervalIds_.add(intervalId);\n            return intervalId;\n        }\n        clearInterval(intervalId) {\n            if (this.setIntervalIds_.has(intervalId)) {\n                this.setIntervalIds_.delete(intervalId);\n                window.clearInterval(intervalId);\n            }\n            return intervalId;\n        }\n        requestAnimationFrame(fn) {\n            if (!this.supportsRaf_) {\n                return this.setTimeout(fn, 1000 / 60);\n            }\n            this.clearTimersOnDispose_();\n            var id;\n            fn = Fn.bind(this, fn);\n            id = window.requestAnimationFrame(() => {\n                if (this.rafIds_.has(id)) {\n                    this.rafIds_.delete(id);\n                }\n                fn();\n            });\n            this.rafIds_.add(id);\n            return id;\n        }\n        requestNamedAnimationFrame(name, fn) {\n            if (this.namedRafs_.has(name)) {\n                return;\n            }\n            this.clearTimersOnDispose_();\n            fn = Fn.bind(this, fn);\n            const id = this.requestAnimationFrame(() => {\n                fn();\n                if (this.namedRafs_.has(name)) {\n                    this.namedRafs_.delete(name);\n                }\n            });\n            this.namedRafs_.set(name, id);\n            return name;\n        }\n        cancelNamedAnimationFrame(name) {\n            if (!this.namedRafs_.has(name)) {\n                return;\n            }\n            this.cancelAnimationFrame(this.namedRafs_.get(name));\n            this.namedRafs_.delete(name);\n        }\n        cancelAnimationFrame(id) {\n            if (!this.supportsRaf_) {\n                return this.clearTimeout(id);\n            }\n            if (this.rafIds_.has(id)) {\n                this.rafIds_.delete(id);\n                window.cancelAnimationFrame(id);\n            }\n            return id;\n        }\n        clearTimersOnDispose_() {\n            if (this.clearingTimersOnDispose_) {\n                return;\n            }\n            this.clearingTimersOnDispose_ = true;\n            this.listenToOnce('dispose', () => {\n                [\n                    [\n                        'namedRafs_',\n                        'cancelNamedAnimationFrame'\n                    ],\n                    [\n                        'rafIds_',\n                        'cancelAnimationFrame'\n                    ],\n                    [\n                        'setTimeoutIds_',\n                        'clearTimeout'\n                    ],\n                    [\n                        'setIntervalIds_',\n                        'clearInterval'\n                    ]\n                ].forEach(([idName, cancelName]) => {\n                    this[idName].forEach((val, key) => this[cancelName](key));\n                });\n                this.clearingTimersOnDispose_ = false;\n            });\n        }\n        static registerComponent(name, ComponentToRegister) {\n            if (typeof name !== 'string' || !name) {\n                throw new Error(`Illegal component name, \"${ name }\"; must be a non-empty string.`);\n            }\n            const Tech = Component.getComponent('Tech');\n            const isTech = Tech && Tech.isTech(ComponentToRegister);\n            const isComp = Component === ComponentToRegister || Component.prototype.isPrototypeOf(ComponentToRegister.prototype);\n            if (isTech || !isComp) {\n                let reason;\n                if (isTech) {\n                    reason = 'techs must be registered using Tech.registerTech()';\n                } else {\n                    reason = 'must be a Component subclass';\n                }\n                throw new Error(`Illegal component, \"${ name }\"; ${ reason }.`);\n            }\n            name = stringCases.toTitleCase(name);\n            if (!Component.components_) {\n                Component.components_ = {};\n            }\n            const Player = Component.getComponent('Player');\n            if (name === 'Player' && Player && Player.players) {\n                const players = Player.players;\n                const playerNames = Object.keys(players);\n                if (players && playerNames.length > 0 && playerNames.map(pname => players[pname]).every(Boolean)) {\n                    throw new Error('Can not register Player component after player has been created.');\n                }\n            }\n            Component.components_[name] = ComponentToRegister;\n            Component.components_[stringCases.toLowerCase(name)] = ComponentToRegister;\n            return ComponentToRegister;\n        }\n        static getComponent(name) {\n            if (!name || !Component.components_) {\n                return;\n            }\n            return Component.components_[name];\n        }\n    }\n    Component.prototype.supportsRaf_ = typeof window.requestAnimationFrame === 'function' && typeof window.cancelAnimationFrame === 'function';\n    Component.registerComponent('Component', Component);\n    return Component;\n});"]}