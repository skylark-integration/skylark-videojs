{"version":3,"sources":["mixins/stateful.js"],"names":["define","Obj","StatefulMixin","state","[object Object]","stateUpdates","changes","each","value","key","this","from","to","trigger","type","target","defaultState","assign","handleStateChanged","on"],"mappings":";;;;;;;AAAAA,QAEI,gBACD,SAAUC,GACT,aACA,MAAMC,GACFC,SACAC,SAASC,GAIL,IAAIC,EAkBJ,MArB4B,mBAAjBD,IACPA,EAAeA,KAGnBJ,EAAIM,KAAKF,EAAc,CAACG,EAAOC,KACvBC,KAAKP,MAAMM,KAASD,KACpBF,EAAUA,OACFG,IACJE,KAAMD,KAAKP,MAAMM,GACjBG,GAAIJ,IAGZE,KAAKP,MAAMM,GAAOD,IAGlBF,GAAWI,KAAKG,SAChBH,KAAKG,SACDP,QAAAA,EACAQ,KAAM,iBAGPR,IAYf,OATA,SAAkBS,EAAQC,GAOtB,OANAf,EAAIgB,OAAOF,EAAQb,GACnBa,EAAOZ,MAAQF,EAAIgB,UAAWF,EAAOZ,MAAOa,GAEH,mBAA9BD,EAAOG,oBAAqCH,EAAOI,IAC1DJ,EAAOI,GAAG,eAAgBJ,EAAOG,oBAE9BH","file":"../../mixins/stateful.js","sourcesContent":["define([\n    ///'./evented',\n    '../utils/obj'\n], function (Obj) {\n    'use strict';\n    const StatefulMixin = {\n        state: {},\n        setState(stateUpdates) {\n            if (typeof stateUpdates === 'function') {\n                stateUpdates = stateUpdates();\n            }\n            let changes;\n            Obj.each(stateUpdates, (value, key) => {\n                if (this.state[key] !== value) {\n                    changes = changes || {};\n                    changes[key] = {\n                        from: this.state[key],\n                        to: value\n                    };\n                }\n                this.state[key] = value;\n            });\n            //if (changes && evented.isEvented(this)) {\n            if (changes && this.trigger) {\n                this.trigger({\n                    changes,\n                    type: 'statechanged'\n                });\n            }\n            return changes;\n        }\n    };\n    function stateful(target, defaultState) {\n        Obj.assign(target, StatefulMixin);\n        target.state = Obj.assign({}, target.state, defaultState);\n        ///if (typeof target.handleStateChanged === 'function' && evented.isEvented(target)) {\n        if (typeof target.handleStateChanged === 'function' && target.on) {\n            target.on('statechanged', target.handleStateChanged);\n        }\n        return target;\n    }\n    return stateful;\n});"]}