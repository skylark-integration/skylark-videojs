{"version":3,"sources":["setup.js"],"names":["define","document","Dom","videojs","_windowLoaded","autoSetup","isReal","options","vids","Array","prototype","slice","call","getElementsByTagName","audios","divs","mediaEls","concat","length","i","e","mediaEl","getAttribute","autoSetupTimeout","undefined","player","wait","vjs","window","setTimeout","setWindowLoaded","removeEventListener","readyState","addEventListener","hasLoaded"],"mappings":";;;;;;;AAAAA,QACI,iCACA,eACD,SAAUC,EAASC,GAClB,aACA,IACIC,EADAC,GAAgB,EAEpB,MAAMC,EAAY,WACd,IAAKH,EAAII,WAA0C,IAA9BH,EAAQI,QAAQF,UACjC,OAEJ,MAAMG,EAAOC,MAAMC,UAAUC,MAAMC,KAAKX,EAASY,qBAAqB,UAChEC,EAASL,MAAMC,UAAUC,MAAMC,KAAKX,EAASY,qBAAqB,UAClEE,EAAON,MAAMC,UAAUC,MAAMC,KAAKX,EAASY,qBAAqB,aAChEG,EAAWR,EAAKS,OAAOH,EAAQC,GACrC,GAAIC,GAAYA,EAASE,OAAS,EAC9B,IAAK,IAAIC,EAAI,EAAGC,EAAIJ,EAASE,OAAQC,EAAIC,EAAGD,IAAK,CAC7C,MAAME,EAAUL,EAASG,GACzB,IAAIE,IAAWA,EAAQC,aAOhB,CACHC,EAAiB,GACjB,MARA,QAAuBC,IAAnBH,EAAQI,OAAsB,CAEd,OADAJ,EAAQC,aAAa,eAEjCnB,EAAQkB,SAQhBjB,GACRmB,EAAiB,IAGzB,SAASA,EAAiBG,EAAMC,GACxBA,IACAxB,EAAUwB,GAEdC,OAAOC,WAAWxB,EAAWqB,GAEjC,SAASI,IACL1B,GAAgB,EAChBwB,OAAOG,oBAAoB,OAAQD,GAEnC5B,EAAII,WACwB,aAAxBL,EAAS+B,WACTF,IAEAF,OAAOK,iBAAiB,OAAQH,IAMxC,OACIzB,UAAAA,EACAkB,iBAAAA,EACAW,UANc,WACd,OAAO9B","file":"../setup.js","sourcesContent":["define([\n    'skylark-langx-globals/document',\n    './utils/dom'\n], function (document,Dom) {\n    'use strict';\n    let _windowLoaded = false;\n    let videojs;\n    const autoSetup = function () {\n        if (!Dom.isReal() || videojs.options.autoSetup === false) {\n            return;\n        }\n        const vids = Array.prototype.slice.call(document.getElementsByTagName('video'));\n        const audios = Array.prototype.slice.call(document.getElementsByTagName('audio'));\n        const divs = Array.prototype.slice.call(document.getElementsByTagName('video-js'));\n        const mediaEls = vids.concat(audios, divs);\n        if (mediaEls && mediaEls.length > 0) {\n            for (let i = 0, e = mediaEls.length; i < e; i++) {\n                const mediaEl = mediaEls[i];\n                if (mediaEl && mediaEl.getAttribute) {\n                    if (mediaEl.player === undefined) {\n                        const options = mediaEl.getAttribute('data-setup');\n                        if (options !== null) {\n                            videojs(mediaEl);\n                        }\n                    }\n                } else {\n                    autoSetupTimeout(1);\n                    break;\n                }\n            }\n        } else if (!_windowLoaded) {\n            autoSetupTimeout(1);\n        }\n    };\n    function autoSetupTimeout(wait, vjs) {\n        if (vjs) {\n            videojs = vjs;\n        }\n        window.setTimeout(autoSetup, wait);\n    }\n    function setWindowLoaded() {\n        _windowLoaded = true;\n        window.removeEventListener('load', setWindowLoaded);\n    }\n    if (Dom.isReal()) {\n        if (document.readyState === 'complete') {\n            setWindowLoaded();\n        } else {\n            window.addEventListener('load', setWindowLoaded);\n        }\n    }\n    const hasLoaded = function () {\n        return _windowLoaded;\n    };\n    return {\n        autoSetup,\n        autoSetupTimeout,\n        hasLoaded\n    };\n});"]}