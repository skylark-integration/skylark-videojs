/**
 * skylark-videojs - A version of video.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["../component","../utils/dom","../utils/obj","../utils/browser","../utils/clamp","../utils/keycode"],function(e,t,s,i,o,h){"use strict";class n extends e{constructor(e,t){super(e,t),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},i={}){return t.className=t.className+" vjs-slider",t=s.assign({tabIndex:0},t),i=s.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),super.createEl(e,t,i)}handleMouseDown(e){const s=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||i.IS_CHROME||e.preventDefault(),t.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove),this.on(s,"mouseup",this.handleMouseUp),this.on(s,"touchmove",this.handleMouseMove),this.on(s,"touchend",this.handleMouseUp),this.handleMouseMove(e)}handleMouseMove(e){}handleMouseUp(){const e=this.bar.el_.ownerDocument;t.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_?e:(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(100*e).toFixed(2)+"%"}),e)}getProgress(){return Number(o(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const s=t.getPointerPosition(this.el_,e);return this.vertical()?s.y:s.x}handleKeyDown(e){h.isEventKey(e,"Left")||h.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):h.isEventKey(e,"Right")||h.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}return e.registerComponent("Slider",n),n});
//# sourceMappingURL=../sourcemaps/slider/slider.js.map
