/**
 * skylark-videojs - A version of video.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["../component","../utils/dom","../utils/obj","../utils/browser","../utils/clamp","../utils/keycode"],function(e,t,s,i,n,o){"use strict";class h extends e{constructor(e,t){super(e,t),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.listenTo("mousedown",this.handleMouseDown),this.listenTo("touchstart",this.handleMouseDown),this.listenTo("keydown",this.handleKeyDown),this.listenTo("click",this.handleClick),this.listenTo(this.player_,"controlsvisible",this.update),this.playerEvent&&this.listenTo(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.unlistenTo("mousedown",this.handleMouseDown),this.unlistenTo("touchstart",this.handleMouseDown),this.unlistenTo("keydown",this.handleKeyDown),this.unlistenTo("click",this.handleClick),this.unlistenTo(this.player_,"controlsvisible",this.update),this.unlistenTo(e,"mousemove",this.handleMouseMove),this.unlistenTo(e,"mouseup",this.handleMouseUp),this.unlistenTo(e,"touchmove",this.handleMouseMove),this.unlistenTo(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.unlistenTo(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},i={}){return t.className=t.className+" vjs-slider",t=s.assign({tabIndex:0},t),i=s.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),super.createEl(e,t,i)}handleMouseDown(e){const s=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||i.IS_CHROME||e.preventDefault(),t.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.listenTo(s,"mousemove",this.handleMouseMove),this.listenTo(s,"mouseup",this.handleMouseUp),this.listenTo(s,"touchmove",this.handleMouseMove),this.listenTo(s,"touchend",this.handleMouseUp),this.handleMouseMove(e)}handleMouseMove(e){}handleMouseUp(){const e=this.bar.el_.ownerDocument;t.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.unlistenTo(e,"mousemove",this.handleMouseMove),this.unlistenTo(e,"mouseup",this.handleMouseUp),this.unlistenTo(e,"touchmove",this.handleMouseMove),this.unlistenTo(e,"touchend",this.handleMouseUp),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_?e:(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(100*e).toFixed(2)+"%"}),e)}getProgress(){return Number(n(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const s=t.getPointerPosition(this.el_,e);return this.vertical()?s.y:s.x}handleKeyDown(e){o.isEventKey(e,"Left")||o.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):o.isEventKey(e,"Right")||o.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}return e.registerComponent("Slider",h),h});
//# sourceMappingURL=../sourcemaps/slider/slider.js.map
