/**
 * skylark-videojs - A version of video.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-globals/window","skylark-langx-globals/document","skylark-domx","../fullscreen-api","./log","./obj","./computed-style","./browser"],function(t,e,n,o,r,i,s,a){"use strict";function l(t){return"string"==typeof t&&Boolean(t.trim())}function u(t){return i.isObject(t)&&1===t.nodeType}function f(t){return function(n,o){if(!l(n))return e[t](null);l(o)&&(o=e.querySelector(o));const r=u(o)?o:e;return r[t]&&r[t](n)}}function d(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const n=t.offsetWidth,r=t.offsetHeight;let i=0,s=0;for(;t.offsetParent&&t!==e[o.fullscreenElement];)i+=t.offsetLeft,s+=t.offsetTop,t=t.offsetParent;return{left:i,top:s,width:n,height:r}}function c(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(t=>("function"==typeof t&&(t=t()),u(t)||(t=t,i.isObject(t)&&3===t.nodeType)?t:"string"==typeof t&&/\S/.test(t)?e.createTextNode(t):void 0)).filter(t=>t);var n}f("querySelector"),f("querySelectorAll");return{isReal:a.isReal,isEl:n.noder.isElement,isInFrame:n.noder.isInFrame,createEl:function(t="div",e={},o={},r){var i=n.noder.createElement(t,e,o);return r&&n.noder.append(i,r),i},textContent:n.data.text,prependTo:function(t,e){n.noder.prepend(e,t)},hasClass:n.styler.hasClass,addClass:n.styler.addClass,removeClass:n.styler.removeClass,toggleClass:n.styler.toogleClass,setAttributes:n.data.attr,getAttributes:function(t){const e={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0){const o=t.attributes;for(let r=o.length-1;r>=0;r--){const i=o[r].name;let s=o[r].value;"boolean"!=typeof t[i]&&-1===n.indexOf(","+i+",")||(s=null!==s),e[i]=s}}return e},getAttribute:n.data.attr,setAttribute:n.data.attr,removeAttribute:n.data.removeAttr,blockTextSelection:function(){e.body.focus(),e.onselectstart=function(){return!1}},unblockTextSelection:function(){e.onselectstart=function(){return!0}},getBoundingClientRect:function(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(t=>{void 0!==e[t]&&(n[t]=e[t])}),n.height||(n.height=parseFloat(s(t,"height"))),n.width||(n.width=parseFloat(s(t,"width"))),n}},findPosition:n.geom.pageRect,getPointerPosition:function(t,e){const n={x:0,y:0};if(a.IS_IOS){let e=t;for(;e&&"html"!==e.nodeName.toLowerCase();){const t=s(e,"transform");if(/^matrix/.test(t)){const e=t.slice(7,-1).split(/,\s/).map(Number);n.x+=e[4],n.y+=e[5]}else if(/^matrix3d/.test(t)){const e=t.slice(9,-1).split(/,\s/).map(Number);n.x+=e[12],n.y+=e[13]}e=e.parentNode}}const o={},r=d(e.target),i=d(t),l=i.width,u=i.height;let f=e.offsetY-(i.top-r.top),c=e.offsetX-(i.left-r.left);return e.changedTouches&&(c=e.changedTouches[0].pageX-i.left,f=e.changedTouches[0].pageY+i.top,a.IS_IOS&&(c-=n.x,f-=n.y)),o.y=1-Math.max(0,Math.min(1,f/u)),o.x=Math.max(0,Math.min(1,c/l)),o},isTextNode:n.noder.isTextNode,emptyEl:n.noder.empty,normalizeContent:c,appendContent:n.noder.append,insertContent:function(t,e){return n.noder.empty(t),n.noder.append(t,e),t},isSingleLeftClick:function(t){return void 0===t.button&&void 0===t.buttons||0===t.button&&void 0===t.buttons||"mouseup"===t.type&&0===t.button&&0===t.buttons||0===t.button&&1===t.buttons},$:function(t,o){return o=o||e,n.finder.find(o,t)},$$:function(t,o){return o=o||e,n.finder.findAll(o,t)}}});
//# sourceMappingURL=../sourcemaps/utils/dom.js.map
