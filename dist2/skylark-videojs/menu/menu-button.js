/**
 * skylark-videojs - A version of video.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["../button","../component","./menu","../utils/dom","../utils/fn","../utils/events","../utils/string-cases","../utils/browser","../utils/keycode"],function(t,e,s,n,i,u,h,o,l){"use strict";class a extends e{constructor(e,s={}){super(e,s),this.menuButton_=new t(e,s),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=t.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0,this.on(this.menuButton_,"tap",this.handleClick),this.on(this.menuButton_,"click",this.handleClick),this.on(this.menuButton_,"keydown",this.handleKeyDown),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),u.on(document,"keyup",i.bind(this,this.handleMenuKeyUp))}),this.on("mouseleave",this.handleMouseLeave),this.on("keydown",this.handleSubmenuKeyDown)}update(){const t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()}createMenu(){const t=new s(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const s=n.createEl("li",{className:"vjs-menu-title",innerHTML:h.toTitleCase(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;const i=new e(this.player_,{el:s});t.addItem(i)}if(this.items=this.createItems(),this.items)for(let e=0;e<this.items.length;e++)t.addItem(this.items[e]);return t}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${t.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup",`vjs-menu-button ${t} ${super.buildCSSClass()}`}controlText(t,e=this.menuButton_.el()){return this.menuButton_.controlText(t,e)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(t){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(t){this.removeClass("vjs-hover"),u.off(document,"keyup",i.bind(this,this.handleMenuKeyUp))}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(t){l.isEventKey(t,"Esc")||l.isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),l.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(l.isEventKey(t,"Up")||l.isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))}handleMenuKeyUp(t){(l.isEventKey(t,"Esc")||l.isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(t){this.handleSubmenuKeyDown(t)}handleSubmenuKeyDown(t){(l.isEventKey(t,"Esc")||l.isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),l.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),o.IS_IOS&&n.isInFrame())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}return e.registerComponent("MenuButton",a),a});
//# sourceMappingURL=../sourcemaps/menu/menu-button.js.map
