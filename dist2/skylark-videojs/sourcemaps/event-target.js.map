{"version":3,"sources":["event-target.js"],"names":["define","Events","EventTarget","EVENT_MAP","prototype","allowedEvents_","on","type","fn","ael","this","addEventListener","off","removeEventListener","one","any","trigger","event","fixEvent","dispatchEvent","queueTrigger","Map","map","get","set","oldTimeout","delete","window","clearTimeout","timeout","setTimeout","size"],"mappings":";;;;;;;AAAAA,QACI,kBACD,SAAUC,GACT,aACA,MAAMC,EAAc,aAyCpB,IAAIC,EAuBJ,OA9DAD,EAAYE,UAAUC,kBACtBH,EAAYE,UAAUE,GAAK,SAAUC,EAAMC,GACvC,MAAMC,EAAMC,KAAKC,iBACjBD,KAAKC,iBAAmB,SAExBV,EAAOK,GAAGI,KAAMH,EAAMC,GACtBE,KAAKC,iBAAmBF,GAE5BP,EAAYE,UAAUO,iBAAmBT,EAAYE,UAAUE,GAC/DJ,EAAYE,UAAUQ,IAAM,SAAUL,EAAMC,GACxCP,EAAOW,IAAIF,KAAMH,EAAMC,IAE3BN,EAAYE,UAAUS,oBAAsBX,EAAYE,UAAUQ,IAClEV,EAAYE,UAAUU,IAAM,SAAUP,EAAMC,GACxC,MAAMC,EAAMC,KAAKC,iBACjBD,KAAKC,iBAAmB,SAExBV,EAAOa,IAAIJ,KAAMH,EAAMC,GACvBE,KAAKC,iBAAmBF,GAE5BP,EAAYE,UAAUW,IAAM,SAAUR,EAAMC,GACxC,MAAMC,EAAMC,KAAKC,iBACjBD,KAAKC,iBAAmB,SAExBV,EAAOc,IAAIL,KAAMH,EAAMC,GACvBE,KAAKC,iBAAmBF,GAE5BP,EAAYE,UAAUY,QAAU,SAAUC,GACtC,MAAMV,EAAOU,EAAMV,MAAQU,EACN,iBAAVA,IACPA,GAAUV,KAAAA,IAEdU,EAAQhB,EAAOiB,SAASD,GACpBP,KAAKL,eAAeE,IAASG,KAAK,KAAOH,IACzCG,KAAK,KAAOH,GAAMU,GAEtBhB,EAAOe,QAAQN,KAAMO,IAEzBf,EAAYE,UAAUe,cAAgBjB,EAAYE,UAAUY,QAE5Dd,EAAYE,UAAUgB,aAAe,SAAUH,GACtCd,IACDA,EAAY,IAAIkB,KAEpB,MAAMd,EAAOU,EAAMV,MAAQU,EAC3B,IAAIK,EAAMnB,EAAUoB,IAAIb,MACnBY,IACDA,EAAM,IAAID,IACVlB,EAAUqB,IAAId,KAAMY,IAExB,MAAMG,EAAaH,EAAIC,IAAIhB,GAC3Be,EAAII,OAAOnB,GACXoB,OAAOC,aAAaH,GACpB,MAAMI,EAAUF,OAAOG,WAAW,KACb,IAAbR,EAAIS,OACJT,EAAM,KACNnB,EAAUuB,OAAOhB,OAErBA,KAAKM,QAAQC,IACd,GACHK,EAAIE,IAAIjB,EAAMsB,IAEX3B","file":"../event-target.js","sourcesContent":["define([\n    './utils/events'\n], function (Events) {\n    'use strict';\n    const EventTarget = function () {\n    };\n    EventTarget.prototype.allowedEvents_ = {};\n    EventTarget.prototype.on = function (type, fn) {\n        const ael = this.addEventListener;\n        this.addEventListener = () => {\n        };\n        Events.on(this, type, fn);\n        this.addEventListener = ael;\n    };\n    EventTarget.prototype.addEventListener = EventTarget.prototype.on;\n    EventTarget.prototype.off = function (type, fn) {\n        Events.off(this, type, fn);\n    };\n    EventTarget.prototype.removeEventListener = EventTarget.prototype.off;\n    EventTarget.prototype.one = function (type, fn) {\n        const ael = this.addEventListener;\n        this.addEventListener = () => {\n        };\n        Events.one(this, type, fn);\n        this.addEventListener = ael;\n    };\n    EventTarget.prototype.any = function (type, fn) {\n        const ael = this.addEventListener;\n        this.addEventListener = () => {\n        };\n        Events.any(this, type, fn);\n        this.addEventListener = ael;\n    };\n    EventTarget.prototype.trigger = function (event) {\n        const type = event.type || event;\n        if (typeof event === 'string') {\n            event = { type };\n        }\n        event = Events.fixEvent(event);\n        if (this.allowedEvents_[type] && this['on' + type]) {\n            this['on' + type](event);\n        }\n        Events.trigger(this, event);\n    };\n    EventTarget.prototype.dispatchEvent = EventTarget.prototype.trigger;\n    let EVENT_MAP;\n    EventTarget.prototype.queueTrigger = function (event) {\n        if (!EVENT_MAP) {\n            EVENT_MAP = new Map();\n        }\n        const type = event.type || event;\n        let map = EVENT_MAP.get(this);\n        if (!map) {\n            map = new Map();\n            EVENT_MAP.set(this, map);\n        }\n        const oldTimeout = map.get(type);\n        map.delete(type);\n        window.clearTimeout(oldTimeout);\n        const timeout = window.setTimeout(() => {\n            if (map.size === 0) {\n                map = null;\n                EVENT_MAP.delete(this);\n            }\n            this.trigger(event);\n        }, 0);\n        map.set(type, timeout);\n    };\n    return EventTarget;\n});"]}